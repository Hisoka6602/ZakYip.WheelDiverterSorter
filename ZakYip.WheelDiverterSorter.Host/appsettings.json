{
  // 日志配置 - Logging Configuration
  "Logging": {
    "LogLevel": {
      "Default": "Information",  // 默认日志级别 - Default log level
      "Microsoft.Hosting.Lifetime": "Information"  // ASP.NET Core生命周期日志级别 - ASP.NET Core lifetime log level
    }
  },
  
  // 路由配置 - Route Configuration
  "RouteConfiguration": {
    "DatabasePath": "Data/routes.db"  // 路由数据库文件路径 - Path to the route database file
  },
  // 摆轮驱动器配置 - Diverter Driver Configuration
  "Driver": {
    "UseHardwareDriver": false,  // 是否使用硬件驱动器 - Whether to use hardware driver
    "Leadshine": {
      "CardNo": 0,  // 雷赛控制卡编号 - Leadshine control card number
      "Diverters": [
        {
          "DiverterId": "D1",  // 摆轮标识符 - Diverter identifier
          "OutputStartBit": 0,  // 输出起始位 - Output start bit
          "FeedbackInputBit": 10  // 反馈输入位 - Feedback input bit
        },
        {
          "DiverterId": "D2",
          "OutputStartBit": 2,
          "FeedbackInputBit": 11
        },
        {
          "DiverterId": "D3",
          "OutputStartBit": 4,
          "FeedbackInputBit": 12
        }
      ]
    }
  },
  // 传感器配置 - Sensor Configuration
  "Sensor": {
    "UseHardwareSensor": false,  // 是否使用硬件传感器 - Whether to use hardware sensor
    "VendorType": "Leadshine",  // 供应商类型 - Vendor type (Leadshine or Mock)
    "Leadshine": {
      "CardNo": 0,  // 雷赛控制卡编号 - Leadshine control card number
      "Sensors": [
        {
          "SensorId": "SENSOR_PE_01",  // 传感器标识符 - Sensor identifier
          "Type": "Photoelectric",  // 传感器类型 - Sensor type (Photoelectric/Laser)
          "InputBit": 0,  // 输入位 - Input bit
          "IsEnabled": true  // 是否启用 - Whether enabled
        },
        {
          "SensorId": "SENSOR_LASER_01",
          "Type": "Laser",
          "InputBit": 1,
          "IsEnabled": true
        }
      ]
    },
    "MockSensors": [  // 模拟传感器配置（用于测试） - Mock sensors configuration (for testing)
      {
        "SensorId": "SENSOR_PE_01",
        "Type": "Photoelectric",
        "IsEnabled": true
      },
      {
        "SensorId": "SENSOR_LASER_01",
        "Type": "Laser",
        "IsEnabled": true
      }
    ]
  },
  // 规则引擎连接配置 - Rule Engine Connection Configuration
  "RuleEngineConnection": {
    "Mode": "Http",  // 通信模式 - Communication mode (Http/Tcp/Mqtt/SignalR)
    "TcpServer": "192.168.1.100:8000",  // TCP服务器地址 - TCP server address (host:port)
    "SignalRHub": "http://192.168.1.100:5000/sortingHub",  // SignalR Hub地址 - SignalR Hub URL
    "MqttBroker": "mqtt://192.168.1.100:1883",  // MQTT代理服务器地址 - MQTT broker address
    "MqttTopic": "sorting/chute/assignment",  // MQTT主题 - MQTT topic for chute assignment
    "HttpApi": "http://localhost:5000/api/sorting/chute",  // HTTP API端点 - HTTP API endpoint
    "TimeoutMs": 5000,  // 请求超时时间（毫秒） - Request timeout in milliseconds
    "RetryCount": 3,  // 重试次数 - Number of retries on failure
    "RetryDelayMs": 1000,  // 重试延迟（毫秒） - Retry delay in milliseconds
    "EnableAutoReconnect": true,  // 启用自动重连 - Enable automatic reconnection
    "Tcp": {
      "ReceiveBufferSize": 8192,  // 接收缓冲区大小（字节） - Receive buffer size in bytes
      "SendBufferSize": 8192,  // 发送缓冲区大小（字节） - Send buffer size in bytes
      "NoDelay": true,  // 禁用Nagle算法 - Disable Nagle's algorithm (reduce latency)
      "KeepAliveInterval": 60  // TCP保活间隔（秒） - TCP keep-alive interval in seconds
    },
    "Http": {
      "MaxConnectionsPerServer": 10,  // 每个服务器的最大连接数 - Maximum connections per server
      "PooledConnectionIdleTimeout": 60,  // 连接池空闲超时（秒） - Pooled connection idle timeout in seconds
      "PooledConnectionLifetime": 0,  // 连接池连接生命周期（秒，0表示无限制） - Pooled connection lifetime (0=unlimited)
      "UseHttp2": false  // 是否使用HTTP/2 - Whether to use HTTP/2
    },
    "Mqtt": {
      "QualityOfServiceLevel": 1,  // 服务质量级别（0/1/2） - QoS level (0=at most once, 1=at least once, 2=exactly once)
      "CleanSession": true,  // 清除会话 - Clean session flag
      "SessionExpiryInterval": 3600,  // 会话过期间隔（秒） - Session expiry interval in seconds
      "MessageExpiryInterval": 0,  // 消息过期间隔（秒，0表示不过期） - Message expiry interval (0=no expiry)
      "ClientIdPrefix": "WheelDiverter"  // 客户端ID前缀 - Client ID prefix
    },
    "SignalR": {
      "HandshakeTimeout": 15,  // 握手超时（秒） - Handshake timeout in seconds
      "KeepAliveInterval": 30,  // 保活间隔（秒） - Keep-alive interval in seconds
      "ServerTimeout": 60,  // 服务器超时（秒） - Server timeout in seconds
      "ReconnectIntervals": null,  // 重连间隔（秒数组，null表示使用默认） - Reconnect intervals array (null=use default)
      "SkipNegotiation": false  // 跳过协商 - Skip negotiation
    }
  },
  // 并发控制配置 - Concurrency Control Configuration
  "Concurrency": {
    "MaxConcurrentParcels": 10,  // 最大并发包裹数 - Maximum concurrent parcels
    "ParcelQueueCapacity": 100,  // 包裹队列容量 - Parcel queue capacity
    "MaxBatchSize": 5,  // 最大批处理大小 - Maximum batch size
    "EnableBatchProcessing": true,  // 启用批处理 - Enable batch processing
    "DiverterLockTimeoutMs": 5000  // 摆轮锁定超时（毫秒） - Diverter lock timeout in milliseconds
  },
  
  // 性能优化配置 - Performance Optimization Configuration
  "Performance": {
    "EnablePathCaching": true,  // 启用路径缓存 - Enable path caching
    "PathCacheDurationMinutes": 5,  // 路径缓存持续时间（分钟） - Path cache duration in minutes
    "EnableMetrics": true,  // 启用性能指标收集 - Enable metrics collection
    "EnableObjectPooling": true  // 启用对象池 - Enable object pooling
  },

  // 中段皮带 IO 联动配置 - Middle Conveyor IO Linkage Configuration
  "MiddleConveyorIo": {
    "Enabled": true,  // 是否启用中段皮带 IO 联动功能 - Enable middle conveyor IO linkage
    "IsSimulationMode": false,  // 是否处于仿真模式 - Simulation mode (false=use hardware driver)
    "StartOrderStrategy": "UpstreamFirst",  // 启动顺序策略 - Start order strategy (UpstreamFirst/DownstreamFirst/Simultaneous)
    "StopOrderStrategy": "DownstreamFirst",  // 停止顺序策略 - Stop order strategy (DownstreamFirst/UpstreamFirst/Simultaneous)
    "LinkageDelayMs": 500,  // 联动操作之间的延迟时间（毫秒） - Delay between linkage operations in milliseconds
    "Segments": [  // 中段皮带段配置列表 - List of conveyor segments
      {
        "SegmentKey": "Middle1",  // 皮带段唯一键 - Unique segment key
        "DisplayName": "中段皮带1",  // 皮带段显示名称 - Display name
        "StartOutputChannel": 100,  // 启动输出点位编号 - Start output channel
        "StopOutputChannel": null,  // 停止输出点位编号（可选） - Stop output channel (optional)
        "FaultInputChannel": 200,  // 故障输入点位编号（可选） - Fault input channel (optional)
        "RunningInputChannel": 201,  // 运行反馈输入点位编号（可选） - Running feedback input channel (optional)
        "Priority": 1,  // 优先级（数值越小优先级越高） - Priority (lower number = higher priority)
        "StartTimeoutMs": 5000,  // 启动超时时间（毫秒） - Start timeout in milliseconds
        "StopTimeoutMs": 5000  // 停止超时时间（毫秒） - Stop timeout in milliseconds
      },
      {
        "SegmentKey": "Middle2",
        "DisplayName": "中段皮带2",
        "StartOutputChannel": 102,
        "StopOutputChannel": null,
        "FaultInputChannel": 202,
        "RunningInputChannel": 203,
        "Priority": 2,
        "StartTimeoutMs": 5000,
        "StopTimeoutMs": 5000
      },
      {
        "SegmentKey": "ReturnLoop",
        "DisplayName": "回流段",
        "StartOutputChannel": 104,
        "StopOutputChannel": null,
        "FaultInputChannel": 204,
        "RunningInputChannel": 205,
        "Priority": 3,
        "StartTimeoutMs": 5000,
        "StopTimeoutMs": 5000
      }
    ]
  }
}
