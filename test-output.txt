Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Core.Tests/bin/Debug/net9.0/ZakYip.WheelDiverterSorter.Core.Tests.dll (.NETCoreApp,Version=v9.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Drivers.Tests/bin/Debug/net9.0/ZakYip.WheelDiverterSorter.Drivers.Tests.dll (.NETCoreApp,Version=v9.0)
A total of 1 test files matched the specified pattern.
Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Ingress.Tests/bin/Debug/net9.0/ZakYip.WheelDiverterSorter.Ingress.Tests.dll (.NETCoreApp,Version=v9.0)
VSTest version 18.0.1 (x64)

Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/bin/Debug/net8.0/ZakYip.WheelDiverterSorter.Host.IntegrationTests.dll (.NETCoreApp,Version=v8.0)
VSTest version 18.0.1 (x64)

VSTest version 18.0.1 (x64)

Starting test execution, please wait...
Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
A total of 1 test files matched the specified pattern.
Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:00.86]     ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockManagerTests.GetLock_SameDiverter_EnforcesExclusivity [FAIL]
  Failed ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockManagerTests.GetLock_SameDiverter_EnforcesExclusivity [81 ms]
  Error Message:
   System.Threading.LockRecursionException : Recursive write lock acquisitions not allowed in this mode.
  Stack Trace:
     at System.Threading.ReaderWriterLockSlim.TryEnterWriteLockCore(TimeoutTracker timeout)
   at System.Threading.ReaderWriterLockSlim.EnterWriteLock()
   at ZakYip.WheelDiverterSorter.Execution.Concurrency.DiverterResourceLock.<>c__DisplayClass6_0.<AcquireWriteLockAsync>b__0() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Execution/ZakYip.WheelDiverterSorter.Execution/Concurrency/DiverterResourceLock.cs:line 31
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at ZakYip.WheelDiverterSorter.Execution.Concurrency.DiverterResourceLock.AcquireWriteLockAsync(CancellationToken cancellationToken) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Execution/ZakYip.WheelDiverterSorter.Execution/Concurrency/DiverterResourceLock.cs:line 28
   at ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockManagerTests.<>c__DisplayClass6_0.<<GetLock_SameDiverter_EnforcesExclusivity>b__0>d.MoveNext() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Core.Tests/DiverterResourceLockManagerTests.cs:line 129
--- End of stack trace from previous location ---
   at ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockManagerTests.GetLock_SameDiverter_EnforcesExclusivity() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Core.Tests/DiverterResourceLockManagerTests.cs:line 136
--- End of stack trace from previous location ---
[xUnit.net 00:00:00.65]     ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7OutputPortTests.WriteAsync_WhenPlcIsNull_ReturnsFalse [FAIL]
[xUnit.net 00:00:00.68]     ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7OutputPortTests.WriteBatchAsync_WhenNotConnected_ReturnsFalse [FAIL]
[xUnit.net 00:00:00.68]     ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7OutputPortTests.WriteAsync_WhenNotConnected_ReturnsFalse [FAIL]
  Failed ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7OutputPortTests.WriteAsync_WhenPlcIsNull_ReturnsFalse [13 ms]
  Error Message:
   System.NotSupportedException : Unsupported expression: c => c.EnsureConnectedAsync(It.IsAny<CancellationToken>())
Non-overridable members (here: S7Connection.EnsureConnectedAsync) may not be used in setup / verification expressions.
  Stack Trace:
     at Moq.Guard.IsOverridable(MethodInfo method, Expression expression) in /_/src/Moq/Guard.cs:line 99
   at Moq.MethodExpectation..ctor(LambdaExpression expression, MethodInfo method, IReadOnlyList`1 arguments, Boolean exactGenericTypeArguments, Boolean skipMatcherInitialization, Boolean allowNonOverridable) in /_/src/Moq/MethodExpectation.cs:line 87
   at Moq.ExpressionExtensions.<Split>g__Split|5_0(Expression e, Expression& r, MethodExpectation& p, Boolean assignment, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 219
   at Moq.ExpressionExtensions.Split(LambdaExpression expression, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 149
   at Moq.Mock.SetupRecursive[TSetup](Mock mock, LambdaExpression expression, Func`4 setupLast, Boolean allowNonOverridableLastProperty) in /_/src/Moq/Mock.cs:line 645
   at Moq.Mock.Setup(Mock mock, LambdaExpression expression, Condition condition) in /_/src/Moq/Mock.cs:line 500
   at Moq.Mock`1.Setup[TResult](Expression`1 expression) in /_/src/Moq/Mock`1.cs:line 452
   at ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7OutputPortTests.WriteAsync_WhenPlcIsNull_ReturnsFalse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Drivers.Tests/S7/S7OutputPortTests.cs:line 74
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7OutputPortTests.WriteBatchAsync_WhenNotConnected_ReturnsFalse [3 ms]
  Error Message:
   System.NotSupportedException : Unsupported expression: c => c.EnsureConnectedAsync(It.IsAny<CancellationToken>())
Non-overridable members (here: S7Connection.EnsureConnectedAsync) may not be used in setup / verification expressions.
  Stack Trace:
     at Moq.Guard.IsOverridable(MethodInfo method, Expression expression) in /_/src/Moq/Guard.cs:line 99
   at Moq.MethodExpectation..ctor(LambdaExpression expression, MethodInfo method, IReadOnlyList`1 arguments, Boolean exactGenericTypeArguments, Boolean skipMatcherInitialization, Boolean allowNonOverridable) in /_/src/Moq/MethodExpectation.cs:line 87
   at Moq.ExpressionExtensions.<Split>g__Split|5_0(Expression e, Expression& r, MethodExpectation& p, Boolean assignment, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 219
   at Moq.ExpressionExtensions.Split(LambdaExpression expression, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 149
   at Moq.Mock.SetupRecursive[TSetup](Mock mock, LambdaExpression expression, Func`4 setupLast, Boolean allowNonOverridableLastProperty) in /_/src/Moq/Mock.cs:line 645
   at Moq.Mock.Setup(Mock mock, LambdaExpression expression, Condition condition) in /_/src/Moq/Mock.cs:line 500
   at Moq.Mock`1.Setup[TResult](Expression`1 expression) in /_/src/Moq/Mock`1.cs:line 452
   at ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7OutputPortTests.WriteBatchAsync_WhenNotConnected_ReturnsFalse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Drivers.Tests/S7/S7OutputPortTests.cs:line 91
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7OutputPortTests.WriteAsync_WhenNotConnected_ReturnsFalse [< 1 ms]
  Error Message:
   System.NotSupportedException : Unsupported expression: c => c.EnsureConnectedAsync(It.IsAny<CancellationToken>())
Non-overridable members (here: S7Connection.EnsureConnectedAsync) may not be used in setup / verification expressions.
  Stack Trace:
     at Moq.Guard.IsOverridable(MethodInfo method, Expression expression) in /_/src/Moq/Guard.cs:line 99
   at Moq.MethodExpectation..ctor(LambdaExpression expression, MethodInfo method, IReadOnlyList`1 arguments, Boolean exactGenericTypeArguments, Boolean skipMatcherInitialization, Boolean allowNonOverridable) in /_/src/Moq/MethodExpectation.cs:line 87
   at Moq.ExpressionExtensions.<Split>g__Split|5_0(Expression e, Expression& r, MethodExpectation& p, Boolean assignment, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 219
   at Moq.ExpressionExtensions.Split(LambdaExpression expression, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 149
   at Moq.Mock.SetupRecursive[TSetup](Mock mock, LambdaExpression expression, Func`4 setupLast, Boolean allowNonOverridableLastProperty) in /_/src/Moq/Mock.cs:line 645
   at Moq.Mock.Setup(Mock mock, LambdaExpression expression, Condition condition) in /_/src/Moq/Mock.cs:line 500
   at Moq.Mock`1.Setup[TResult](Expression`1 expression) in /_/src/Moq/Mock`1.cs:line 452
   at ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7OutputPortTests.WriteAsync_WhenNotConnected_ReturnsFalse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Drivers.Tests/S7/S7OutputPortTests.cs:line 58
--- End of stack trace from previous location ---
[xUnit.net 00:00:00.69]     ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7InputPortTests.ReadAsync_WhenNotConnected_ReturnsFalse [FAIL]
[xUnit.net 00:00:00.69]     ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7InputPortTests.ReadAsync_WhenPlcIsNull_ReturnsFalse [FAIL]
[xUnit.net 00:00:00.70]     ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7InputPortTests.ReadBatchAsync_WhenNotConnected_ReturnsAllFalse [FAIL]
  Failed ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7InputPortTests.ReadAsync_WhenNotConnected_ReturnsFalse [1 ms]
  Error Message:
   System.NotSupportedException : Unsupported expression: c => c.EnsureConnectedAsync(It.IsAny<CancellationToken>())
Non-overridable members (here: S7Connection.EnsureConnectedAsync) may not be used in setup / verification expressions.
  Stack Trace:
     at Moq.Guard.IsOverridable(MethodInfo method, Expression expression) in /_/src/Moq/Guard.cs:line 99
   at Moq.MethodExpectation..ctor(LambdaExpression expression, MethodInfo method, IReadOnlyList`1 arguments, Boolean exactGenericTypeArguments, Boolean skipMatcherInitialization, Boolean allowNonOverridable) in /_/src/Moq/MethodExpectation.cs:line 87
   at Moq.ExpressionExtensions.<Split>g__Split|5_0(Expression e, Expression& r, MethodExpectation& p, Boolean assignment, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 219
   at Moq.ExpressionExtensions.Split(LambdaExpression expression, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 149
   at Moq.Mock.SetupRecursive[TSetup](Mock mock, LambdaExpression expression, Func`4 setupLast, Boolean allowNonOverridableLastProperty) in /_/src/Moq/Mock.cs:line 645
   at Moq.Mock.Setup(Mock mock, LambdaExpression expression, Condition condition) in /_/src/Moq/Mock.cs:line 500
   at Moq.Mock`1.Setup[TResult](Expression`1 expression) in /_/src/Moq/Mock`1.cs:line 452
   at ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7InputPortTests.ReadAsync_WhenNotConnected_ReturnsFalse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Drivers.Tests/S7/S7InputPortTests.cs:line 58
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7InputPortTests.ReadAsync_WhenPlcIsNull_ReturnsFalse [2 ms]
  Error Message:
   System.NotSupportedException : Unsupported expression: c => c.EnsureConnectedAsync(It.IsAny<CancellationToken>())
Non-overridable members (here: S7Connection.EnsureConnectedAsync) may not be used in setup / verification expressions.
  Stack Trace:
     at Moq.Guard.IsOverridable(MethodInfo method, Expression expression) in /_/src/Moq/Guard.cs:line 99
   at Moq.MethodExpectation..ctor(LambdaExpression expression, MethodInfo method, IReadOnlyList`1 arguments, Boolean exactGenericTypeArguments, Boolean skipMatcherInitialization, Boolean allowNonOverridable) in /_/src/Moq/MethodExpectation.cs:line 87
   at Moq.ExpressionExtensions.<Split>g__Split|5_0(Expression e, Expression& r, MethodExpectation& p, Boolean assignment, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 219
   at Moq.ExpressionExtensions.Split(LambdaExpression expression, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 149
   at Moq.Mock.SetupRecursive[TSetup](Mock mock, LambdaExpression expression, Func`4 setupLast, Boolean allowNonOverridableLastProperty) in /_/src/Moq/Mock.cs:line 645
   at Moq.Mock.Setup(Mock mock, LambdaExpression expression, Condition condition) in /_/src/Moq/Mock.cs:line 500
   at Moq.Mock`1.Setup[TResult](Expression`1 expression) in /_/src/Moq/Mock`1.cs:line 452
   at ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7InputPortTests.ReadAsync_WhenPlcIsNull_ReturnsFalse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Drivers.Tests/S7/S7InputPortTests.cs:line 74
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7InputPortTests.ReadBatchAsync_WhenNotConnected_ReturnsAllFalse [3 ms]
  Error Message:
   System.NotSupportedException : Unsupported expression: c => c.EnsureConnectedAsync(It.IsAny<CancellationToken>())
Non-overridable members (here: S7Connection.EnsureConnectedAsync) may not be used in setup / verification expressions.
  Stack Trace:
     at Moq.Guard.IsOverridable(MethodInfo method, Expression expression) in /_/src/Moq/Guard.cs:line 99
   at Moq.MethodExpectation..ctor(LambdaExpression expression, MethodInfo method, IReadOnlyList`1 arguments, Boolean exactGenericTypeArguments, Boolean skipMatcherInitialization, Boolean allowNonOverridable) in /_/src/Moq/MethodExpectation.cs:line 87
   at Moq.ExpressionExtensions.<Split>g__Split|5_0(Expression e, Expression& r, MethodExpectation& p, Boolean assignment, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 219
   at Moq.ExpressionExtensions.Split(LambdaExpression expression, Boolean allowNonOverridableLastProperty) in /_/src/Moq/ExpressionExtensions.cs:line 149
   at Moq.Mock.SetupRecursive[TSetup](Mock mock, LambdaExpression expression, Func`4 setupLast, Boolean allowNonOverridableLastProperty) in /_/src/Moq/Mock.cs:line 645
   at Moq.Mock.Setup(Mock mock, LambdaExpression expression, Condition condition) in /_/src/Moq/Mock.cs:line 500
   at Moq.Mock`1.Setup[TResult](Expression`1 expression) in /_/src/Moq/Mock`1.cs:line 452
   at ZakYip.WheelDiverterSorter.Drivers.Tests.S7.S7InputPortTests.ReadBatchAsync_WhenNotConnected_ReturnsAllFalse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Drivers.Tests/S7/S7InputPortTests.cs:line 91
--- End of stack trace from previous location ---
[xUnit.net 00:00:01.30]     ZakYip.WheelDiverterSorter.Core.Tests.ConcurrentSwitchingPathExecutorTests.ExecuteAsync_HighConcurrency_MaintainsCorrectness [FAIL]
  Failed ZakYip.WheelDiverterSorter.Core.Tests.ConcurrentSwitchingPathExecutorTests.ExecuteAsync_HighConcurrency_MaintainsCorrectness [132 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: 50
Actual:   4
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Core.Tests.ConcurrentSwitchingPathExecutorTests.ExecuteAsync_HighConcurrency_MaintainsCorrectness() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Core.Tests/ConcurrentSwitchingPathExecutorTests.cs:line 393
--- End of stack trace from previous location ---
[xUnit.net 00:00:01.40]     ZakYip.WheelDiverterSorter.Core.Tests.ConcurrentSwitchingPathExecutorTests.ExecuteAsync_SameDiverter_ExecutesSerially [FAIL]
  Failed ZakYip.WheelDiverterSorter.Core.Tests.ConcurrentSwitchingPathExecutorTests.ExecuteAsync_SameDiverter_ExecutesSerially [102 ms]
  Error Message:
   Assert.Equal() Failure: Collections differ
                        ↓ (pos 1)
Expected: int[]     [1, 2, 3, 4, 5]
Actual:   List<int> [1]
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Core.Tests.ConcurrentSwitchingPathExecutorTests.ExecuteAsync_SameDiverter_ExecutesSerially() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Core.Tests/ConcurrentSwitchingPathExecutorTests.cs:line 229
--- End of stack trace from previous location ---
[xUnit.net 00:00:01.30]     ZakYip.WheelDiverterSorter.Ingress.Tests.IoSimulationTests.IoStateConsistency_ConcurrentReadWrite_MaintainsDataIntegrity [FAIL]
[xUnit.net 00:00:01.32]     ZakYip.WheelDiverterSorter.Ingress.Tests.IoSimulationTests.IoOverload_RapidFireCommands_NoDeadlock [FAIL]
[xUnit.net 00:00:01.73]     ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockTests.WriteLock_IsExclusive [FAIL]
[xUnit.net 00:00:01.73]     ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockTests.LockHandle_DisposedAutomatically_ReleasesLock [FAIL]
  Failed ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockTests.WriteLock_IsExclusive [58 ms]
  Error Message:
   System.Threading.LockRecursionException : Recursive write lock acquisitions not allowed in this mode.
  Stack Trace:
     at System.Threading.ReaderWriterLockSlim.TryEnterWriteLockCore(TimeoutTracker timeout)
   at System.Threading.ReaderWriterLockSlim.EnterWriteLock()
   at ZakYip.WheelDiverterSorter.Execution.Concurrency.DiverterResourceLock.<>c__DisplayClass6_0.<AcquireWriteLockAsync>b__0() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Execution/ZakYip.WheelDiverterSorter.Execution/Concurrency/DiverterResourceLock.cs:line 31
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunFromThreadPoolDispatchLoop(Thread threadPoolThread, ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at ZakYip.WheelDiverterSorter.Execution.Concurrency.DiverterResourceLock.AcquireWriteLockAsync(CancellationToken cancellationToken) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Execution/ZakYip.WheelDiverterSorter.Execution/Concurrency/DiverterResourceLock.cs:line 28
   at ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockTests.<>c__DisplayClass6_0.<<WriteLock_IsExclusive>b__0>d.MoveNext() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Core.Tests/DiverterResourceLockTests.cs:line 99
--- End of stack trace from previous location ---
   at ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockTests.WriteLock_IsExclusive() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Core.Tests/DiverterResourceLockTests.cs:line 106
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockTests.LockHandle_DisposedAutomatically_ReleasesLock [3 ms]
  Error Message:
   System.Threading.SynchronizationLockException : The write lock is being released without being held.
  Stack Trace:
     at System.Threading.ReaderWriterLockSlim.ExitWriteLock()
   at ZakYip.WheelDiverterSorter.Execution.Concurrency.<DiverterResourceLock>FE3F7FA5979DD2FCFD1A31B10631489E8E2097A1A42B03DB13B05914B3D9BD17A__WriteLockReleaser.Dispose() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Execution/ZakYip.WheelDiverterSorter.Execution/Concurrency/DiverterResourceLock.cs:line 76
   at ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockTests.<>c__DisplayClass8_0.<<LockHandle_DisposedAutomatically_ReleasesLock>b__0>d.MoveNext() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Core.Tests/DiverterResourceLockTests.cs:line 139
   at ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockTests.<>c__DisplayClass8_0.<<LockHandle_DisposedAutomatically_ReleasesLock>b__0>d.MoveNext()
--- End of stack trace from previous location ---
   at ZakYip.WheelDiverterSorter.Core.Tests.DiverterResourceLockTests.LockHandle_DisposedAutomatically_ReleasesLock() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Core.Tests/DiverterResourceLockTests.cs:line 134
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Ingress.Tests.IoSimulationTests.IoStateConsistency_ConcurrentReadWrite_MaintainsDataIntegrity [24 ms]
  Error Message:
   Assert.Contains() Failure: Item not found in collection
Collection: [False, False, False, False, False, ···]
Not found:  True
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Ingress.Tests.IoSimulationTests.IoStateConsistency_ConcurrentReadWrite_MaintainsDataIntegrity() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Ingress.Tests/IoSimulationTests.cs:line 393
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Ingress.Tests.IoSimulationTests.IoOverload_RapidFireCommands_NoDeadlock [23 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: Task { Status = RanToCompletion }
Actual:   Task { Status = RanToCompletion }
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Ingress.Tests.IoSimulationTests.IoOverload_RapidFireCommands_NoDeadlock() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Ingress.Tests/IoSimulationTests.cs:line 229
--- End of stack trace from previous location ---
Results File: /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Ingress.Tests/TestResults/test-results.trx

Failed!  - Failed:     2, Passed:    22, Skipped:     0, Total:    24, Duration: 1 s - ZakYip.WheelDiverterSorter.Ingress.Tests.dll (net9.0)
Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Communication.Tests/bin/Debug/net8.0/ZakYip.WheelDiverterSorter.Communication.Tests.dll (.NETCoreApp,Version=v8.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:02.39]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithVeryLongParcelId_HandlesCorrectly [FAIL]
[xUnit.net 00:00:02.52]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithSpecialCharactersInParcelId_HandlesCorrectly [FAIL]
[xUnit.net 00:00:02.58]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest(chuteId: 0) [FAIL]
[xUnit.net 00:00:02.59]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest(chuteId: -1) [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithVeryLongParcelId_HandlesCorrectly [1 s]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithVeryLongParcelId_HandlesCorrectly() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/HostApiErrorScenarioTests.cs:line 139
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithSpecialCharactersInParcelId_HandlesCorrectly [1 ms]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithSpecialCharactersInParcelId_HandlesCorrectly() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/HostApiErrorScenarioTests.cs:line 189
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest(chuteId: 0) [60 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest(Int32 chuteId) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/HostApiErrorScenarioTests.cs:line 48
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest(chuteId: -1) [7 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest(Int32 chuteId) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/HostApiErrorScenarioTests.cs:line 48
--- End of stack trace from previous location ---
[xUnit.net 00:00:02.65]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest(chuteId: -2147483648) [FAIL]
[xUnit.net 00:00:02.66]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.PostRequest_WithMalformedJson_ReturnsBadRequest [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest(chuteId: -2147483648) [35 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest(Int32 chuteId) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/HostApiErrorScenarioTests.cs:line 48
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.PostRequest_WithMalformedJson_ReturnsBadRequest [18 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.PostRequest_WithMalformedJson_ReturnsBadRequest() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/HostApiErrorScenarioTests.cs:line 168
--- End of stack trace from previous location ---
[xUnit.net 00:00:02.80]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.ConcurrentRequests_HandleCorrectly [FAIL]
[xUnit.net 00:00:02.86]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithEmptyParcelId_ReturnsBadRequest(parcelId: " ") [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.ConcurrentRequests_HandleCorrectly [125 ms]
  Error Message:
   Expected at least 80% success rate, got 0/20
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.ConcurrentRequests_HandleCorrectly() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/HostApiErrorScenarioTests.cs:line 121
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithEmptyParcelId_ReturnsBadRequest(parcelId: " ") [19 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithEmptyParcelId_ReturnsBadRequest(String parcelId) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/HostApiErrorScenarioTests.cs:line 67
--- End of stack trace from previous location ---
[xUnit.net 00:00:02.90]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithEmptyParcelId_ReturnsBadRequest(parcelId: "") [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithEmptyParcelId_ReturnsBadRequest(parcelId: "") [20 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.HostApiErrorScenarioTests.DebugSort_WithEmptyParcelId_ReturnsBadRequest(String parcelId) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/HostApiErrorScenarioTests.cs:line 67
--- End of stack trace from previous location ---
[xUnit.net 00:00:03.86]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.ConfigurationHotUpdateTests.CommunicationConfig_UpdateAndVerify_ConfigurationPersists [FAIL]
[xUnit.net 00:00:03.92]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.CommunicationApiValidationTests.UpdateConfiguration_WithMissingConnectionMode_ReturnsBadRequest [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.ConfigurationHotUpdateTests.CommunicationConfig_UpdateAndVerify_ConfigurationPersists [215 ms]
  Error Message:
   Assert.Equal() Failure: Strings differ
           ↓ (pos 0)
Expected: "192.168.1.100:8888"
Actual:   "localhost:8000"
           ↑ (pos 0)
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.ConfigurationHotUpdateTests.CommunicationConfig_UpdateAndVerify_ConfigurationPersists() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/ConfigurationHotUpdateTests.cs:line 70
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.CommunicationApiValidationTests.UpdateConfiguration_WithMissingConnectionMode_ReturnsBadRequest [110 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   OK
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.CommunicationApiValidationTests.UpdateConfiguration_WithMissingConnectionMode_ReturnsBadRequest() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/CommunicationApiValidationTests.cs:line 73
--- End of stack trace from previous location ---
[xUnit.net 00:00:04.20]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.CommunicationApiValidationTests.UpdateConfiguration_WithMissingMode_ReturnsBadRequest [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.CommunicationApiValidationTests.UpdateConfiguration_WithMissingMode_ReturnsBadRequest [30 ms]
  Error Message:
   Assert.Contains() Failure: Sub-string not found
String:    "{"message":"HTTP模式下，HttpApi不能为空"}"
Not found: "mode"
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.CommunicationApiValidationTests.UpdateConfiguration_WithMissingMode_ReturnsBadRequest() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/CommunicationApiValidationTests.cs:line 55
--- End of stack trace from previous location ---
[xUnit.net 00:00:04.39]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.ResetSystemConfig_ReturnsSuccess [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.ResetSystemConfig_ReturnsSuccess [107 ms]
  Error Message:
   System.Text.Json.JsonException : JSON deserialization for type 'ZakYip.WheelDiverterSorter.Host.Models.Config.SystemConfigResponse' was missing required properties, including the following: id, exceptionChuteId, mqttDefaultPort, tcpDefaultPort
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowJsonException_JsonRequiredPropertyMissing(JsonTypeInfo parent, BitArray requiredPropertiesSet)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.ResetSystemConfig_ReturnsSuccess() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/AllApiEndpointsTests.cs:line 238
--- End of stack trace from previous location ---
[xUnit.net 00:00:04.50]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.CommunicationApiValidationTests.UpdateConfiguration_WithInvalidConnectionMode_ReturnsBadRequest [FAIL]
[xUnit.net 00:00:04.55]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.SimulationSortEndpointTests.NewSortEndpoint_WithInvalidChuteId_ShouldReturnBadRequest [FAIL]
[xUnit.net 00:00:04.60]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.SimulationSortEndpointTests.NewSortEndpoint_ShouldReturnProperResponse [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.CommunicationApiValidationTests.UpdateConfiguration_WithInvalidConnectionMode_ReturnsBadRequest [77 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   OK
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.CommunicationApiValidationTests.UpdateConfiguration_WithInvalidConnectionMode_ReturnsBadRequest() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/CommunicationApiValidationTests.cs:line 258
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.SimulationSortEndpointTests.NewSortEndpoint_WithInvalidChuteId_ShouldReturnBadRequest [221 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method5392(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.SimulationSortEndpointTests.NewSortEndpoint_WithInvalidChuteId_ShouldReturnBadRequest() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/SimulationSortEndpointTests.cs:line 83
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.SimulationSortEndpointTests.NewSortEndpoint_ShouldReturnProperResponse [35 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method5392(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.SimulationSortEndpointTests.NewSortEndpoint_ShouldReturnProperResponse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/SimulationSortEndpointTests.cs:line 33
--- End of stack trace from previous location ---
[xUnit.net 00:00:04.62]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.GetSystemConfig_ReturnsSuccess [FAIL]
[xUnit.net 00:00:04.62]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.SimulationSortEndpointTests.NewSortEndpoint_WithInvalidParcelId_ShouldReturnBadRequest [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.GetSystemConfig_ReturnsSuccess [15 ms]
  Error Message:
   System.Text.Json.JsonException : JSON deserialization for type 'ZakYip.WheelDiverterSorter.Host.Models.Config.SystemConfigResponse' was missing required properties, including the following: id, exceptionChuteId, mqttDefaultPort, tcpDefaultPort
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowJsonException_JsonRequiredPropertyMissing(JsonTypeInfo parent, BitArray requiredPropertiesSet)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at System.Net.Http.Json.HttpContentJsonExtensions.ReadFromJsonAsyncCore[T](HttpContent content, JsonSerializerOptions options, CancellationToken cancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.GetSystemConfig_ReturnsSuccess() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/AllApiEndpointsTests.cs:line 210
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.SimulationSortEndpointTests.NewSortEndpoint_WithInvalidParcelId_ShouldReturnBadRequest [25 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method5392(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.SimulationSortEndpointTests.NewSortEndpoint_WithInvalidParcelId_ShouldReturnBadRequest() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/SimulationSortEndpointTests.cs:line 61
--- End of stack trace from previous location ---
[xUnit.net 00:00:04.66]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.DebugSort_WithValidRequest_ReturnsSuccess [FAIL]
[xUnit.net 00:00:04.67]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.DebugSort_WithValidRequest_ReturnsSuccess [2 ms]
  Error Message:
   Expected success status code but got NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.DebugSort_WithValidRequest_ReturnsSuccess() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/AllApiEndpointsTests.cs:line 49
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest [2 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.AllApiEndpointsTests.DebugSort_WithInvalidChuteId_ReturnsBadRequest() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/AllApiEndpointsTests.cs:line 72
--- End of stack trace from previous location ---
[xUnit.net 00:00:04.94]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.GetPanelState_ReturnsProperResponse [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.GetPanelState_ReturnsProperResponse [310 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method6102(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.GetPanelState_ReturnsProperResponse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/PanelSimulationControllerTests.cs:line 92
--- End of stack trace from previous location ---
[xUnit.net 00:00:04.96]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ReleaseButton_ReturnsProperResponse [FAIL]
[xUnit.net 00:00:04.97]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.PressButton_ReturnsProperResponse [FAIL]
[xUnit.net 00:00:04.98]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.GetSignalTowerHistory_ReturnsProperResponse [FAIL]
[xUnit.net 00:00:04.99]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ReleaseButton_InNonSimulationMode_ReturnsBadRequestWithChineseMessage [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ReleaseButton_ReturnsProperResponse [15 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method6126(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ReleaseButton_ReturnsProperResponse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/PanelSimulationControllerTests.cs:line 58
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.PressButton_ReturnsProperResponse [10 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method6188(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.PressButton_ReturnsProperResponse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/PanelSimulationControllerTests.cs:line 24
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.GetSignalTowerHistory_ReturnsProperResponse [7 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method6221(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.GetSignalTowerHistory_ReturnsProperResponse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/PanelSimulationControllerTests.cs:line 140
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ReleaseButton_InNonSimulationMode_ReturnsBadRequestWithChineseMessage [4 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method6126(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ReleaseButton_InNonSimulationMode_ReturnsBadRequestWithChineseMessage() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/PanelSimulationControllerTests.cs:line 74
--- End of stack trace from previous location ---
[xUnit.net 00:00:05.00]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ResetAllButtons_InNonSimulationMode_ReturnsBadRequestWithChineseMessage [FAIL]
[xUnit.net 00:00:05.03]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.GetSignalTowerHistory_InNonSimulationMode_ReturnsBadRequestWithChineseMessage [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ResetAllButtons_InNonSimulationMode_ReturnsBadRequestWithChineseMessage [14 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method6295(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ResetAllButtons_InNonSimulationMode_ReturnsBadRequestWithChineseMessage() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/PanelSimulationControllerTests.cs:line 122
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.GetSignalTowerHistory_InNonSimulationMode_ReturnsBadRequestWithChineseMessage [20 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method6221(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.GetSignalTowerHistory_InNonSimulationMode_ReturnsBadRequestWithChineseMessage() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/PanelSimulationControllerTests.cs:line 156
--- End of stack trace from previous location ---
[xUnit.net 00:00:05.05]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.PressButton_InNonSimulationMode_ReturnsBadRequestWithChineseMessage [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.PressButton_InNonSimulationMode_ReturnsBadRequestWithChineseMessage [21 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method6188(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.PressButton_InNonSimulationMode_ReturnsBadRequestWithChineseMessage() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/PanelSimulationControllerTests.cs:line 40
--- End of stack trace from previous location ---
[xUnit.net 00:00:05.06]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ResetAllButtons_ReturnsProperResponse [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ResetAllButtons_ReturnsProperResponse [3 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method6295(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.Host.IntegrationTests.PanelSimulationControllerTests.ResetAllButtons_ReturnsProperResponse() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/PanelSimulationControllerTests.cs:line 106
--- End of stack trace from previous location ---
[xUnit.net 00:00:05.38]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.DebugControllerTests.DebugSort_WithValidRequest_ReturnsSuccess [FAIL]
[xUnit.net 00:00:05.38]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.DebugControllerTests.DebugSort_WithEmptyParcelId_ReturnsBadRequest [FAIL]
[xUnit.net 00:00:05.40]     ZakYip.WheelDiverterSorter.Host.IntegrationTests.DebugControllerTests.DebugSort_WithInvalidTargetChuteId_ReturnsBadRequest [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.DebugControllerTests.DebugSort_WithValidRequest_ReturnsSuccess [208 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: OK
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.DebugControllerTests.DebugSort_WithValidRequest_ReturnsSuccess() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/DebugControllerTests.cs:line 33
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.DebugControllerTests.DebugSort_WithEmptyParcelId_ReturnsBadRequest [6 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.DebugControllerTests.DebugSort_WithEmptyParcelId_ReturnsBadRequest() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/DebugControllerTests.cs:line 50
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.IntegrationTests.DebugControllerTests.DebugSort_WithInvalidTargetChuteId_ReturnsBadRequest [11 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: BadRequest
Actual:   NotFound
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.IntegrationTests.DebugControllerTests.DebugSort_WithInvalidTargetChuteId_ReturnsBadRequest() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/DebugControllerTests.cs:line 67
--- End of stack trace from previous location ---
Results File: /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.IntegrationTests/TestResults/test-results.trx

Failed!  - Failed:    32, Passed:   145, Skipped:     0, Total:   177, Duration: 5 s - ZakYip.WheelDiverterSorter.Host.IntegrationTests.dll (net8.0)
Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Observability.Tests/bin/Debug/net9.0/ZakYip.WheelDiverterSorter.Observability.Tests.dll (.NETCoreApp,Version=v9.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:00.41]     ZakYip.WheelDiverterSorter.Observability.Tests.FileBasedParcelTraceSinkTests.WriteAsync_FileWriteFailure_LogsWarning [FAIL]
  Failed ZakYip.WheelDiverterSorter.Observability.Tests.FileBasedParcelTraceSinkTests.WriteAsync_FileWriteFailure_LogsWarning [1 ms]
  Error Message:
   System.IO.FileNotFoundException : Could not find file '/proc/test_readonly'.
  Stack Trace:
     at System.IO.FileSystem.CreateParentsAndDirectory(String fullPath, UnixFileMode unixCreateMode)
   at System.IO.FileSystem.CreateDirectory(String fullPath, UnixFileMode unixCreateMode)
   at System.IO.Directory.CreateDirectory(String path)
   at ZakYip.WheelDiverterSorter.Observability.Tracing.FileBasedParcelTraceSink..ctor(ILogger`1 logger, ISystemClock clock, String logDirectory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Observability/ZakYip.WheelDiverterSorter.Observability/Tracing/FileBasedParcelTraceSink.cs:line 43
   at ZakYip.WheelDiverterSorter.Observability.Tests.FileBasedParcelTraceSinkTests.WriteAsync_FileWriteFailure_LogsWarning() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Observability.Tests/FileBasedParcelTraceSinkTests.cs:line 122
--- End of stack trace from previous location ---
Results File: /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Observability.Tests/TestResults/test-results.trx

Failed!  - Failed:     1, Passed:   164, Skipped:     0, Total:   165, Duration: 348 ms - ZakYip.WheelDiverterSorter.Observability.Tests.dll (net9.0)
Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Execution.Tests/bin/Debug/net9.0/ZakYip.WheelDiverterSorter.Execution.Tests.dll (.NETCoreApp,Version=v9.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:00.38]     ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.StressTest_ManyDiverters_ManyOperations [SKIP]
[xUnit.net 00:00:00.39]     ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.MultipleLocks_WithDifferentDiverters_AllowConcurrentAccess [SKIP]
  Skipped ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.StressTest_ManyDiverters_ManyOperations [1 ms]
  Skipped ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.MultipleLocks_WithDifferentDiverters_AllowConcurrentAccess [1 ms]
[xUnit.net 00:00:00.40]     ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.ReadLocks_AllowConcurrentAccess [SKIP]
[xUnit.net 00:00:00.40]     ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.LockFairness_MultipleWaiters [SKIP]
[xUnit.net 00:00:00.40]     ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.AcquireLock_WithCancellationToken_ThrowsOnCancel [SKIP]
[xUnit.net 00:00:00.40]     ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.AcquireLock_WithHighContention_HandlesCorrectly [SKIP]
[xUnit.net 00:00:00.42]     ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.WriteLock_BlocksOtherWriters [SKIP]
  Skipped ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.ReadLocks_AllowConcurrentAccess [1 ms]
  Skipped ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.LockFairness_MultipleWaiters [1 ms]
  Skipped ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.AcquireLock_WithCancellationToken_ThrowsOnCancel [1 ms]
  Skipped ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.AcquireLock_WithHighContention_HandlesCorrectly [1 ms]
  Skipped ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockAdvancedTests.WriteLock_BlocksOtherWriters [1 ms]
[xUnit.net 00:00:00.49]     ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockManagerConcurrencyTests.GetLock_WithAcquireAndRelease_NoDeadlock [SKIP]
  Skipped ZakYip.WheelDiverterSorter.Execution.Tests.Concurrency.DiverterResourceLockManagerConcurrencyTests.GetLock_WithAcquireAndRelease_NoDeadlock [1 ms]
[xUnit.net 00:00:05.78]     ZakYip.WheelDiverterSorter.Communication.Tests.TcpRuleEngineClientContractTests.Contract_NotifyParcelDetectedAsync_ShouldTimeout_WhenServerDoesNotPush [FAIL]
  Failed ZakYip.WheelDiverterSorter.Communication.Tests.TcpRuleEngineClientContractTests.Contract_NotifyParcelDetectedAsync_ShouldTimeout_WhenServerDoesNotPush [5 s]
  Error Message:
   System.OperationCanceledException : The operation was canceled.
  Stack Trace:
     at System.Threading.CancellationToken.ThrowOperationCanceledException()
   at System.Threading.CancellationToken.ThrowIfCancellationRequested()
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.ThrowException(SocketError error, CancellationToken cancellationToken)
   at System.Net.Sockets.Socket.AwaitableSocketAsyncEventArgs.System.Threading.Tasks.Sources.IValueTaskSource<System.Int32>.GetResult(Int16 token)
   at ZakYip.WheelDiverterSorter.Communication.Clients.TcpRuleEngineClient.SendRequestAsync(Int64 parcelId, CancellationToken cancellationToken) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Clients/TcpRuleEngineClient.cs:line 209
   at ZakYip.WheelDiverterSorter.Communication.Clients.TcpRuleEngineClient.<>c__DisplayClass10_0.<<NotifyParcelDetectedAsync>b__0>d.MoveNext() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Clients/TcpRuleEngineClient.cs:line 188
--- End of stack trace from previous location ---
   at ZakYip.WheelDiverterSorter.Communication.Clients.RuleEngineClientBase.<>c__DisplayClass14_0.<<ExecuteWithRetryAsync>b__0>d.MoveNext() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Clients/RuleEngineClientBase.cs:line 119
--- End of stack trace from previous location ---
   at ZakYip.WheelDiverterSorter.Communication.Clients.RuleEngineClientBase.ExecuteWithRetryAsync[T](Func`2 operation, String operationName, CancellationToken cancellationToken) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Clients/RuleEngineClientBase.cs:line 83
   at ZakYip.WheelDiverterSorter.Communication.Clients.RuleEngineClientBase.ExecuteWithRetryAsync(Func`2 operation, String operationName, CancellationToken cancellationToken) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Clients/RuleEngineClientBase.cs:line 118
   at ZakYip.WheelDiverterSorter.Communication.Clients.TcpRuleEngineClient.NotifyParcelDetectedAsync(Int64 parcelId, CancellationToken cancellationToken) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Clients/TcpRuleEngineClient.cs:line 187
   at ZakYip.WheelDiverterSorter.Communication.Tests.RuleEngineClientContractTestsBase.Contract_NotifyParcelDetectedAsync_ShouldTimeout_WhenServerDoesNotPush() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Communication.Tests/RuleEngineClientContractTestsBase.cs:line 118
--- End of stack trace from previous location ---
Results File: /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Communication.Tests/TestResults/test-results.trx

Failed!  - Failed:     1, Passed:   110, Skipped:     0, Total:   111, Duration: 8 s - ZakYip.WheelDiverterSorter.Communication.Tests.dll (net8.0)
Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/bin/Debug/net8.0/ZakYip.WheelDiverterSorter.E2ETests.dll (.NETCoreApp,Version=v8.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
Results File: /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Execution.Tests/TestResults/test-results.trx

Passed!  - Failed:     0, Passed:   116, Skipped:     8, Total:   124, Duration: 5 s - ZakYip.WheelDiverterSorter.Execution.Tests.dll (net9.0)
Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests/bin/Debug/net9.0/ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.dll (.NETCoreApp,Version=v9.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:00.87]     ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.PR27_NodeFailure_Should_RouteToExceptionChute [FAIL]
[xUnit.net 00:00:00.88]     ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.PathGeneration_ForValidChute_ShouldReturnValidPath [FAIL]
  Failed ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.PR27_NodeFailure_Should_RouteToExceptionChute [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/VendorAgnosticScenarioTests.cs:line 19
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
  Failed ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.PathGeneration_ForValidChute_ShouldReturnValidPath [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ParcelSortingWorkflowTests.cs:line 28
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
[xUnit.net 00:00:00.94]     ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.Scenario_ShouldBe_SerializableToJson [FAIL]
[xUnit.net 00:00:00.95]     ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.PathGeneration_ForInvalidChute_ShouldReturnNull [FAIL]
[xUnit.net 00:00:00.95]     ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.CompleteSortingFlow_WithValidChute_ShouldSucceed [FAIL]
[xUnit.net 00:00:00.96]     ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.PR27_NormalSorting_Should_SortAllParcelsCorrectly [FAIL]
[xUnit.net 00:00:00.96]     ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.PathExecution_WithValidPath_ShouldSucceed [FAIL]
[xUnit.net 00:00:00.96]     ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.PR27_UpstreamDelay_Should_HandleDelaysGracefully [FAIL]
[xUnit.net 00:00:00.97]     ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.Scenario_ShouldBe_PersistableToFile [FAIL]
[xUnit.net 00:00:00.98]     ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.DebugSort_API_ShouldProcessRequest [FAIL]
  Failed ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.Scenario_ShouldBe_SerializableToJson [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/VendorAgnosticScenarioTests.cs:line 19
   at InvokeStub_VendorAgnosticScenarioTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.PathGeneration_ForInvalidChute_ShouldReturnNull [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ParcelSortingWorkflowTests.cs:line 28
   at InvokeStub_ParcelSortingWorkflowTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.CompleteSortingFlow_WithValidChute_ShouldSucceed [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ParcelSortingWorkflowTests.cs:line 28
   at InvokeStub_ParcelSortingWorkflowTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.PR27_NormalSorting_Should_SortAllParcelsCorrectly [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/VendorAgnosticScenarioTests.cs:line 19
   at InvokeStub_VendorAgnosticScenarioTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.PathExecution_WithValidPath_ShouldSucceed [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ParcelSortingWorkflowTests.cs:line 28
   at InvokeStub_ParcelSortingWorkflowTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.PR27_UpstreamDelay_Should_HandleDelaysGracefully [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/VendorAgnosticScenarioTests.cs:line 19
   at InvokeStub_VendorAgnosticScenarioTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests.Scenario_ShouldBe_PersistableToFile [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.VendorAgnosticScenarioTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/VendorAgnosticScenarioTests.cs:line 19
   at InvokeStub_VendorAgnosticScenarioTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.DebugSort_API_ShouldProcessRequest [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ParcelSortingWorkflowTests.cs:line 28
   at InvokeStub_ParcelSortingWorkflowTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
[xUnit.net 00:00:01.00]     ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.FallbackToExceptionChute_WhenPathGenerationFails [FAIL]
[xUnit.net 00:00:01.04]     ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.MultipleChutes_ShouldHaveUniqueConfigurations [FAIL]
[xUnit.net 00:00:01.04]     ZakYip.WheelDiverterSorter.E2ETests.PanelStartupToSortingE2ETests.Scenario2_UpstreamDelayedResponse_SystemHandlesCorrectly [FAIL]
[xUnit.net 00:00:01.05]     ZakYip.WheelDiverterSorter.E2ETests.PanelStartupToSortingE2ETests.Scenario3_FirstParcelAfterStartup_SystemWarmupValidation [FAIL]
[xUnit.net 00:00:01.08]     ZakYip.WheelDiverterSorter.E2ETests.PanelStartupToSortingE2ETests.Scenario1_SingleParcelNormalSorting_FullE2EWorkflow [FAIL]
[xUnit.net 00:00:02.21]     ZakYip.WheelDiverterSorter.E2ETests.ConfigApiLongRunSimulationTests.ApiDrivenSimulation_ConfigureViaApi_ThenStartPanel_VerifyResults [FAIL]
[xUnit.net 00:00:02.28]     ZakYip.WheelDiverterSorter.E2ETests.ConfigApiLongRunSimulationTests.GetSimulationStatus_ShouldReturnStatus [FAIL]
[xUnit.net 00:00:02.36]     ZakYip.WheelDiverterSorter.E2ETests.ConfigApiLongRunSimulationTests.GetPanelState_ShouldReturnCurrentState [FAIL]
  Failed ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.FallbackToExceptionChute_WhenPathGenerationFails [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ParcelSortingWorkflowTests.cs:line 28
   at InvokeStub_ParcelSortingWorkflowTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests.MultipleChutes_ShouldHaveUniqueConfigurations [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.ParcelSortingWorkflowTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ParcelSortingWorkflowTests.cs:line 28
   at InvokeStub_ParcelSortingWorkflowTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.PanelStartupToSortingE2ETests.Scenario2_UpstreamDelayedResponse_SystemHandlesCorrectly [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at ZakYip.WheelDiverterSorter.E2ETests.PanelE2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/PanelStartupToSortingE2ETests.cs:line 445
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.PanelStartupToSortingE2ETests..ctor(PanelE2ETestFactory factory, ITestOutputHelper output) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/PanelStartupToSortingE2ETests.cs:line 56
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
  Failed ZakYip.WheelDiverterSorter.E2ETests.PanelStartupToSortingE2ETests.Scenario3_FirstParcelAfterStartup_SystemWarmupValidation [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at ZakYip.WheelDiverterSorter.E2ETests.PanelE2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/PanelStartupToSortingE2ETests.cs:line 445
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.PanelStartupToSortingE2ETests..ctor(PanelE2ETestFactory factory, ITestOutputHelper output) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/PanelStartupToSortingE2ETests.cs:line 56
   at InvokeStub_PanelStartupToSortingE2ETests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.PanelStartupToSortingE2ETests.Scenario1_SingleParcelNormalSorting_FullE2EWorkflow [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at ZakYip.WheelDiverterSorter.E2ETests.PanelE2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/PanelStartupToSortingE2ETests.cs:line 445
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.PanelStartupToSortingE2ETests..ctor(PanelE2ETestFactory factory, ITestOutputHelper output) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/PanelStartupToSortingE2ETests.cs:line 56
   at InvokeStub_PanelStartupToSortingE2ETests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithFewArgs(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.ConfigApiLongRunSimulationTests.ApiDrivenSimulation_ConfigureViaApi_ThenStartPanel_VerifyResults [1 s]
  Error Message:
   System.Text.Json.JsonException : JSON deserialization for type 'ZakYip.WheelDiverterSorter.Host.Models.Config.SystemConfigResponse' was missing required properties, including the following: id, exceptionChuteId, mqttDefaultPort, tcpDefaultPort
  Stack Trace:
     at System.Text.Json.ThrowHelper.ThrowJsonException_JsonRequiredPropertyMissing(JsonTypeInfo parent, BitArray requiredPropertiesSet)
   at System.Text.Json.Serialization.Converters.ObjectDefaultConverter`1.OnTryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value)
   at System.Text.Json.Serialization.JsonConverter`1.TryRead(Utf8JsonReader& reader, Type typeToConvert, JsonSerializerOptions options, ReadStack& state, T& value, Boolean& isPopulatedValue)
   at System.Text.Json.Serialization.JsonConverter`1.ReadCore(Utf8JsonReader& reader, JsonSerializerOptions options, ReadStack& state)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.ContinueDeserialize(ReadBufferState& bufferState, JsonReaderState& jsonReaderState, ReadStack& readStack)
   at System.Text.Json.Serialization.Metadata.JsonTypeInfo`1.DeserializeAsync(Stream utf8Json, CancellationToken cancellationToken)
   at ZakYip.WheelDiverterSorter.E2ETests.Helpers.JsonHelper.ReadJsonAsync[T](HttpContent content, CancellationToken cancellationToken) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/Helpers/JsonHelper.cs:line 41
   at ZakYip.WheelDiverterSorter.E2ETests.Helpers.JsonHelper.ReadJsonAsync[T](HttpContent content, CancellationToken cancellationToken) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/Helpers/JsonHelper.cs:line 41
   at ZakYip.WheelDiverterSorter.E2ETests.ConfigApiLongRunSimulationTests.ApiDrivenSimulation_ConfigureViaApi_ThenStartPanel_VerifyResults() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ConfigApiLongRunSimulationTests.cs:line 205
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.E2ETests.ConfigApiLongRunSimulationTests.GetSimulationStatus_ShouldReturnStatus [49 ms]
  Error Message:
   System.InvalidOperationException : Unable to resolve service for type 'ZakYip.WheelDiverterSorter.Core.LineModel.Bindings.IPanelInputReader' while attempting to activate 'ZakYip.WheelDiverterSorter.Host.Controllers.SimulationController'.
  Stack Trace:
     at Microsoft.Extensions.DependencyInjection.ActivatorUtilities.ThrowHelperUnableToResolveService(Type type, Type requiredBy)
   at lambda_method227(Closure, IServiceProvider, Object[])
   at Microsoft.AspNetCore.Mvc.Controllers.ControllerFactoryProvider.<>c__DisplayClass6_0.<CreateControllerFactory>g__CreateController|0(ControllerContext controllerContext)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.Next(State& next, Scope& scope, Object& state, Boolean& isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ControllerActionInvoker.InvokeInnerFilterAsync()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeFilterPipelineAsync>g__Awaited|20_0(ResourceInvoker invoker, Task lastTask, State next, Scope scope, Object state, Boolean isCompleted)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Microsoft.AspNetCore.Mvc.Infrastructure.ResourceInvoker.<InvokeAsync>g__Awaited|17_0(ResourceInvoker invoker, Task task, IDisposable scope)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Prometheus.HttpMetrics.HttpRequestDurationMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpRequestCountMiddleware.Invoke(HttpContext context)
   at Prometheus.HttpMetrics.HttpInProgressMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.TestHost.HttpContextBuilder.<>c__DisplayClass23_0.<<SendAsync>g__RunRequestAsync|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.TestHost.ClientHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.CookieContainerHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at Microsoft.AspNetCore.Mvc.Testing.Handlers.RedirectHandler.SendAsync(HttpRequestMessage request, CancellationToken cancellationToken)
   at System.Net.Http.HttpClient.<SendAsync>g__Core|83_0(HttpRequestMessage request, HttpCompletionOption completionOption, CancellationTokenSource cts, Boolean disposeCts, CancellationTokenSource pendingRequestsCts, CancellationToken originalCancellationToken)
   at ZakYip.WheelDiverterSorter.E2ETests.ConfigApiLongRunSimulationTests.GetSimulationStatus_ShouldReturnStatus() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ConfigApiLongRunSimulationTests.cs:line 326
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.E2ETests.ConfigApiLongRunSimulationTests.GetPanelState_ShouldReturnCurrentState [81 ms]
  Error Message:
   Expected response.StatusCode to be HttpStatusCode.OK {value: 200}, but found HttpStatusCode.NotFound {value: 404}.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Primitives.EnumAssertions`2.Be(TEnum expected, String because, Object[] becauseArgs)
   at ZakYip.WheelDiverterSorter.E2ETests.ConfigApiLongRunSimulationTests.GetPanelState_ShouldReturnCurrentState() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/ConfigApiLongRunSimulationTests.cs:line 313
--- End of stack trace from previous location ---
[xUnit.net 00:00:02.42]     ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.ChuteAssignment_ShouldBeReceivedFromRuleEngine [FAIL]
[xUnit.net 00:00:02.43]     ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.RuleEngineDisconnect_ShouldDisconnectCleanly [FAIL]
[xUnit.net 00:00:02.44]     ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.ConnectionFailure_ShouldBeHandledGracefully [FAIL]
[xUnit.net 00:00:02.45]     ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.AssignmentTimeout_ShouldFallbackToExceptionChute [FAIL]
[xUnit.net 00:00:02.45]     ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.RuleEngineConnection_ShouldEstablishSuccessfully [FAIL]
[xUnit.net 00:00:02.46]     ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.NotificationFailure_ShouldReturnFalse [FAIL]
[xUnit.net 00:00:02.47]     ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.ParcelDetectionNotification_ShouldBeSentToRuleEngine [FAIL]
[xUnit.net 00:00:03.54]     ZakYip.WheelDiverterSorter.E2ETests.SensorFaultSimulationTests.LifecycleLogger_RecordsParcelEvents [FAIL]
  Failed ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.ChuteAssignment_ShouldBeReceivedFromRuleEngine [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/RuleEngineIntegrationTests.cs:line 19
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeDirectByRefWithFewArgs(Object obj, Span`1 copyOfArgs, BindingFlags invokeAttr)
  Failed ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.RuleEngineDisconnect_ShouldDisconnectCleanly [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/RuleEngineIntegrationTests.cs:line 19
   at InvokeStub_RuleEngineIntegrationTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.ConnectionFailure_ShouldBeHandledGracefully [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/RuleEngineIntegrationTests.cs:line 19
   at InvokeStub_RuleEngineIntegrationTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.AssignmentTimeout_ShouldFallbackToExceptionChute [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/RuleEngineIntegrationTests.cs:line 19
   at InvokeStub_RuleEngineIntegrationTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.RuleEngineConnection_ShouldEstablishSuccessfully [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/RuleEngineIntegrationTests.cs:line 19
   at InvokeStub_RuleEngineIntegrationTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.NotificationFailure_ShouldReturnFalse [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/RuleEngineIntegrationTests.cs:line 19
   at InvokeStub_RuleEngineIntegrationTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests.ParcelDetectionNotification_ShouldBeSentToRuleEngine [1 ms]
  Error Message:
   System.InvalidOperationException : HTTP模式下，HttpApi配置不能为空
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.ValidateOptions(RuleEngineConnectionOptions options) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 132
   at ZakYip.WheelDiverterSorter.Communication.CommunicationServiceExtensions.AddRuleEngineCommunication(IServiceCollection services, IConfiguration configuration) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/CommunicationServiceExtensions.cs:line 48
   at Program.<Main>$(String[] args) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Host/ZakYip.WheelDiverterSorter.Host/Program.cs:line 177
   at InvokeStub_Program.<Main>$(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
--- End of stack trace from previous location ---
   at Microsoft.Extensions.Hosting.HostFactoryResolver.HostingListener.CreateHost()
   at Microsoft.Extensions.Hosting.HostFactoryResolver.<>c__DisplayClass10_0.<ResolveHostFactory>b__0(String[] args)
   at Microsoft.AspNetCore.Mvc.Testing.DeferredHostBuilder.Build()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateHost(IHostBuilder builder)
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestFactory.CreateHost(IHostBuilder builder) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestFactory.cs:line 88
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.ConfigureHostBuilder(IHostBuilder hostBuilder)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.EnsureServer()
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateDefaultClient(Uri baseAddress, DelegatingHandler[] handlers)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient(WebApplicationFactoryClientOptions options)
   at Microsoft.AspNetCore.Mvc.Testing.WebApplicationFactory`1.CreateClient()
   at ZakYip.WheelDiverterSorter.E2ETests.E2ETestBase..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/E2ETestBase.cs:line 34
   at ZakYip.WheelDiverterSorter.E2ETests.RuleEngineIntegrationTests..ctor(E2ETestFactory factory) in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/RuleEngineIntegrationTests.cs:line 19
   at InvokeStub_RuleEngineIntegrationTests..ctor(Object, Span`1)
   at System.Reflection.MethodBaseInvoker.InvokeWithOneArg(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
  Failed ZakYip.WheelDiverterSorter.E2ETests.SensorFaultSimulationTests.LifecycleLogger_RecordsParcelEvents [1 s]
  Error Message:
   Expected _lifecycleLogs not to be empty because 应该记录包裹生命周期事件.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Execution.GivenSelector`1.FailWith(String message, Object[] args)
   at FluentAssertions.Execution.GivenSelector`1.FailWith(String message)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.NotBeEmpty(String because, Object[] becauseArgs)
   at ZakYip.WheelDiverterSorter.E2ETests.SensorFaultSimulationTests.LifecycleLogger_RecordsParcelEvents() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/SensorFaultSimulationTests.cs:line 311
--- End of stack trace from previous location ---
[xUnit.net 00:00:03.19]     ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.DateTimeUsageComplianceTests.ShouldNotUseDirectDateTimeNowInSourceCode [FAIL]
  Failed ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.DateTimeUsageComplianceTests.ShouldNotUseDirectDateTimeNowInSourceCode [2 s]
  Error Message:
   发现 160 个 DateTime 使用违规：

共发现 160 个违规:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📄 src/Analyzers/ZakYip.WheelDiverterSorter.Analyzers/DateTimeNowUsageAnalyzer.cs
   Line 20: DateTime.Now (Error)
   "禁止使用 DateTime.Now 或 DateTime.UtcNow - Do not use DateTime.Now or DateTime.UtcNow";
   Line 20: DateTime.UtcNow (Error)
   "禁止使用 DateTime.Now 或 DateTime.UtcNow - Do not use DateTime.Now or DateTime.UtcNow";
   Line 26: DateTime.Now (Error)
   "业务代码应使用 ISystemClock 接口获取时间，便于测试和时区管理。仅 SystemClock 实现类可以直接使用 DateTime.Now/UtcNow。" +
   Line 27: DateTime.Now (Error)
   "Business code should use ISystemClock interface to get time for testability and timezone management. Only SystemClock implementation can directly use DateTime.Now/UtcNow.";

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/IoLinkageConfiguration.cs
   Line 55: DateTime.UtcNow (Error)
   public DateTime CreatedAt { get; init; } = DateTime.UtcNow;
   Line 60: DateTime.UtcNow (Error)
   public DateTime UpdatedAt { get; init; } = DateTime.UtcNow;
   Line 75: DateTime.UtcNow (Error)
   CreatedAt = DateTime.UtcNow,
   Line 76: DateTime.UtcNow (Error)
   UpdatedAt = DateTime.UtcNow

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/LiteDbLineTopologyRepository.cs
   Line 105: DateTime.Now (Error)
   var now = currentTime ?? DateTime.Now; // 使用本地时间
   Line 135: DateTime.Now (Error)
   CreatedAt = DateTime.Now,
   Line 136: DateTime.Now (Error)
   UpdatedAt = DateTime.Now

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/LiteDbSystemConfigurationRepository.cs
   Line 115: DateTime.UtcNow (Error)
   var now = currentTime ?? DateTime.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/LiteDbWheelBindingsRepository.cs
   Line 98: DateTime.Now (Error)
   var now = currentTime ?? DateTime.Now; // 使用本地时间
   Line 120: DateTime.Now (Error)
   CreatedAt = DateTime.Now,
   Line 121: DateTime.Now (Error)
   UpdatedAt = DateTime.Now

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/PanelConfiguration.cs
   Line 160: DateTime.UtcNow (Error)
   public DateTime CreatedAt { get; init; } = DateTime.UtcNow;
   Line 165: DateTime.UtcNow (Error)
   public DateTime UpdatedAt { get; init; } = DateTime.UtcNow;
   Line 199: DateTime.UtcNow (Error)
   CreatedAt = DateTime.UtcNow,
   Line 200: DateTime.UtcNow (Error)
   UpdatedAt = DateTime.UtcNow

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Orchestration/IPathReroutingService.cs
   Line 113: DateTimeOffset.UtcNow (Error)
   ReroutedAt = DateTimeOffset.UtcNow
   Line 134: DateTimeOffset.UtcNow (Error)
   ReroutedAt = DateTimeOffset.UtcNow

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Orchestration/RouteTopologyConsistencyChecker.cs
   Line 83: DateTime.Now (Error)
   var checkedAt = DateTime.Now; // 使用本地时间

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Segments/ConveyorOperationResult.cs
   Line 27: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset Timestamp { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Topology/DefaultSwitchingPathGenerator.cs
   Line 110: DateTimeOffset.UtcNow (Error)
   GeneratedAt = DateTimeOffset.UtcNow,

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Contracts/AssignChuteContracts.cs
   Line 24: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset RequestTime { get; init; } = DateTimeOffset.UtcNow;
   Line 71: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ResponseTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Contracts/CreateParcelContracts.cs
   Line 24: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset DetectedAt { get; init; } = DateTimeOffset.UtcNow;
   Line 58: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ResponseTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Contracts/SortingRequest.cs
   Line 27: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset RequestTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Contracts/SortingResponse.cs
   Line 53: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ResponseTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Models/ChuteAssignment.cs
   Line 38: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset AssignmentTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Models/ParcelDescriptor.cs
   Line 27: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset IngressTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/Diagnostics/RelayWheelDiverterSelfTest.cs
   Line 43: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 55: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 67: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/HardwareSwitchingPathExecutor.cs
   Line 92: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 126: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 142: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 170: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 181: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/Vendors/Simulated/SimulatedConveyorSegmentDriver.cs
   Line 36: DateTimeOffset.UtcNow (Error)
   _startCommandTime = DateTimeOffset.UtcNow;

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/Vendors/Simulated/SimulatedPanelInputReader.cs
   Line 30: DateTimeOffset.UtcNow (Error)
   LastChangedAt = DateTimeOffset.UtcNow,
   Line 45: DateTimeOffset.UtcNow (Error)
   LastChangedAt = DateTimeOffset.UtcNow,
   Line 68: DateTimeOffset.UtcNow (Error)
   LastChangedAt = DateTimeOffset.UtcNow,
   Line 80: DateTimeOffset.UtcNow (Error)
   ? (int)(DateTimeOffset.UtcNow - currentState.LastChangedAt).TotalMilliseconds
   Line 87: DateTimeOffset.UtcNow (Error)
   LastChangedAt = DateTimeOffset.UtcNow,
   ... 还有 1 个违规

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/Vendors/Simulated/SimulatedSignalTowerOutput.cs
   Line 100: DateTimeOffset.UtcNow (Error)
   ChangedAt = DateTimeOffset.UtcNow

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/AnomalyDetector.cs
   Line 58: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow,
   Line 74: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow,
   Line 87: DateTimeOffset.UtcNow (Error)
   _upstreamTimeouts.Enqueue(DateTimeOffset.UtcNow);
   Line 126: DateTimeOffset.UtcNow (Error)
   var now = DateTimeOffset.UtcNow;
   Line 181: DateTimeOffset.UtcNow (Error)
   var now = DateTimeOffset.UtcNow;
   ... 还有 2 个违规

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Concurrency/ConcurrentSwitchingPathExecutor.cs
   Line 128: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 170: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 181: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Concurrency/ParcelQueueItem.cs
   Line 26: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset EnqueuedAt { get; init; } = DateTimeOffset.UtcNow;

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/ConveyorSegment.cs
   Line 85: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;
   Line 88: DateTimeOffset.UtcNow (Error)
   while (DateTimeOffset.UtcNow - startTime < timeout)
   Line 163: DateTimeOffset.UtcNow (Error)
   var stopTime = DateTimeOffset.UtcNow;
   Line 166: DateTimeOffset.UtcNow (Error)
   while (DateTimeOffset.UtcNow - stopTime < timeout)

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/EnhancedPathFailureHandler.cs
   Line 79: DateTimeOffset.UtcNow (Error)
   var failureTime = DateTimeOffset.UtcNow;
   Line 126: DateTimeOffset.UtcNow (Error)
   var failureTime = DateTimeOffset.UtcNow;

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/MockSwitchingPathExecutor.cs
   Line 58: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 69: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/PathFailureHandler.cs
   Line 45: DateTimeOffset.UtcNow (Error)
   var failureTime = DateTimeOffset.UtcNow;
   Line 76: DateTimeOffset.UtcNow (Error)
   var failureTime = DateTimeOffset.UtcNow;

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/PathReroutingService.cs
   Line 150: DateTimeOffset.UtcNow (Error)
   GeneratedAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/OverloadEvaluationMiddleware.cs
   Line 77: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/PathExecutionMiddleware.cs
   Line 61: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;
   Line 68: DateTimeOffset.UtcNow (Error)
   var elapsedMs = (DateTimeOffset.UtcNow - startTime).TotalMilliseconds;
   Line 89: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 103: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 126: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   ... 还有 1 个违规

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/RoutePlanningMiddleware.cs
   Line 47: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;
   Line 100: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 125: DateTimeOffset.UtcNow (Error)
   var elapsedMs = (DateTimeOffset.UtcNow - startTime).TotalMilliseconds;
   Line 134: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/TracingMiddleware.cs
   Line 78: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 94: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/UpstreamAssignmentMiddleware.cs
   Line 66: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/SelfTest/SystemSelfTestCoordinator.cs
   Line 37: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Commands/ChangeParcelChuteCommandHandler.cs
   Line 41: DateTimeOffset.UtcNow (Error)
   var requestedAt = command.RequestedAt ?? DateTimeOffset.UtcNow;
   Line 93: DateTimeOffset.UtcNow (Error)
   routePlan.MarkAsExceptionRouted(DateTimeOffset.UtcNow);

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Commands/ChangeParcelChuteResult.cs
   Line 75: DateTimeOffset.UtcNow (Error)
   ProcessedAt = DateTimeOffset.UtcNow
   Line 93: DateTimeOffset.UtcNow (Error)
   ProcessedAt = DateTimeOffset.UtcNow

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Controllers/HealthController.cs
   Line 70: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow
   Line 82: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow
   Line 122: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow
   Line 141: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Controllers/IoLinkageController.cs
   Line 692: DateTime.UtcNow (Error)
   CreatedAt = DateTime.UtcNow,
   Line 693: DateTime.UtcNow (Error)
   UpdatedAt = DateTime.UtcNow

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Controllers/RouteConfigController.cs
   Line 420: DateTime.Now (Error)
   fileName = $"routes_{DateTime.Now:yyyyMMdd_HHmmss}.csv";
   Line 427: DateTime.Now (Error)
   fileName = $"routes_{DateTime.Now:yyyyMMdd_HHmmss}.json";

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Models/ApiResponse.cs
   Line 39: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset Timestamp { get; init; } = DateTimeOffset.UtcNow;

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Pipeline/UpstreamAssignmentAdapter.cs
   Line 36: DateTimeOffset.UtcNow (Error)
   RequestTime = DateTimeOffset.UtcNow

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Pipeline/UpstreamFacadeAssignmentMiddleware.cs
   Line 47: DateTimeOffset.UtcNow (Error)
   RequestTime = DateTimeOffset.UtcNow
   Line 63: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 93: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 114: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Services/CachedSwitchingPathGenerator.cs
   Line 40: DateTimeOffset.UtcNow (Error)
   return cachedPath with { GeneratedAt = DateTimeOffset.UtcNow };

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Services/CommunicationStatsService.cs
   Line 54: DateTimeOffset.UtcNow (Error)
   return (long)(DateTimeOffset.UtcNow - _firstConnectedAt.Value).TotalSeconds;
   Line 79: DateTimeOffset.UtcNow (Error)
   var now = DateTimeOffset.UtcNow;
   Line 92: DateTimeOffset.UtcNow (Error)
   _lastDisconnectedAt = DateTimeOffset.UtcNow;

📄 src/Host/ZakYip.WheelDiverterSorter.Host/StateMachine/SystemStateManager.cs
   Line 254: DateTimeOffset.UtcNow (Error)
   TransitionTime = DateTimeOffset.UtcNow,
   Line 294: DateTimeOffset.UtcNow (Error)
   PerformedAt = DateTimeOffset.UtcNow
   Line 320: DateTimeOffset.UtcNow (Error)
   EnteredAt = DateTimeOffset.UtcNow,

📄 src/Host/ZakYip.WheelDiverterSorter.Host/StateMachine/SystemStateManagerWithBoot.cs
   Line 74: DateTimeOffset.UtcNow (Error)
   PerformedAt = DateTimeOffset.UtcNow

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Health/RuleEngineUpstreamHealthChecker.cs
   Line 45: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 61: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 70: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 82: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 94: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Infrastructure/SimpleCircuitBreaker.cs
   Line 42: DateTime.UtcNow (Error)
   DateTime.UtcNow - _lastFailureTime >= _breakDuration)
   Line 106: DateTime.UtcNow (Error)
   _lastFailureTime = DateTime.UtcNow;

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Models/ChuteAssignmentNotificationEventArgs.cs
   Line 25: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset NotificationTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Models/ChuteAssignmentRequest.cs
   Line 16: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset RequestTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Models/ChuteAssignmentResponse.cs
   Line 32: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ResponseTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Models/ParcelDetectionNotification.cs
   Line 19: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset DetectionTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Models/SensorErrorEventArgs.cs
   Line 37: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ErrorTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Models/SensorFaultEventArgs.cs
   Line 37: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset FaultTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Models/SensorHealthStatus.cs
   Line 38: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset LastCheckTime { get; set; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Models/SensorRecoveryEventArgs.cs
   Line 27: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset RecoveryTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Sensors/LeadshineSensor.cs
   Line 144: DateTimeOffset.UtcNow (Error)
   TriggerTime = DateTimeOffset.UtcNow,

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Sensors/MockSensor.cs
   Line 147: DateTimeOffset.UtcNow (Error)
   TriggerTime = DateTimeOffset.UtcNow,
   Line 158: DateTimeOffset.UtcNow (Error)
   TriggerTime = DateTimeOffset.UtcNow,

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Services/SensorHealthMonitor.cs
   Line 62: DateTimeOffset.UtcNow (Error)
   LastCheckTime = DateTimeOffset.UtcNow
   Line 83: DateTimeOffset.UtcNow (Error)
   status.StartTime = DateTimeOffset.UtcNow;
   Line 126: DateTimeOffset.UtcNow (Error)
   status.UptimeSeconds = (DateTimeOffset.UtcNow - status.StartTime.Value).TotalSeconds;
   Line 142: DateTimeOffset.UtcNow (Error)
   status.UptimeSeconds = (DateTimeOffset.UtcNow - status.StartTime.Value).TotalSeconds;
   Line 157: DateTimeOffset.UtcNow (Error)
   status.LastErrorTime = DateTimeOffset.UtcNow;
   ... 还有 7 个违规

📄 src/Observability/ZakYip.WheelDiverterSorter.Observability/PrometheusMetrics.cs
   Line 773: DateTimeOffset.UtcNow (Error)
   SystemSelfTestLastSuccessTimestamp.Set(DateTimeOffset.UtcNow.ToUnixTimeSeconds());
   Line 858: DateTimeOffset.UtcNow (Error)
   LastAlertTimestamp.WithLabels(severity, code).Set(DateTimeOffset.UtcNow.ToUnixTimeSeconds());

📄 src/Simulation/ZakYip.WheelDiverterSorter.Simulation/Services/CongestionMetricsCollector.cs
   Line 41: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow,
   Line 85: DateTimeOffset.UtcNow (Error)
   var cutoffTime = DateTimeOffset.UtcNow - _timeWindow;

📄 src/Simulation/ZakYip.WheelDiverterSorter.Simulation/Services/ParcelTimelineFactory.cs
   Line 35: DateTimeOffset.UtcNow (Error)
   _simulationStartTime = DateTimeOffset.UtcNow;
   Line 278: DateTimeOffset.UtcNow (Error)
   var elapsed = DateTimeOffset.UtcNow - _simulationStartTime;

📄 src/Simulation/ZakYip.WheelDiverterSorter.Simulation/Services/SimulationRunner.cs
   Line 110: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;
   Line 131: DateTimeOffset.UtcNow (Error)
   var endTime = DateTimeOffset.UtcNow;
   Line 209: DateTimeOffset.UtcNow (Error)
   var lastMetricsTime = DateTimeOffset.UtcNow;
   Line 217: DateTimeOffset.UtcNow (Error)
   var currentTime = DateTimeOffset.UtcNow;
   Line 326: DateTimeOffset.UtcNow (Error)
   var processingStartTime = DateTimeOffset.UtcNow;
   ... 还有 8 个违规

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💡 修复建议:
1. 将 DateTime.Now → ISystemClock.LocalNow
2. 将 DateTime.UtcNow → ISystemClock.LocalNow
3. 将 DateTimeOffset.UtcNow → ISystemClock.LocalNowOffset
4. 在构造函数注入 ISystemClock 依赖

  Stack Trace:
     at ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.DateTimeUsageComplianceTests.ShouldNotUseDirectDateTimeNowInSourceCode() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests/DateTimeUsageComplianceTests.cs:line 30
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:05.11]     ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.DateTimeUsageComplianceTests.ShouldNotUseUtcTimeInBusinessLogic [FAIL]
  Failed ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.DateTimeUsageComplianceTests.ShouldNotUseUtcTimeInBusinessLogic [1 s]
  Error Message:
   发现 173 个 UTC 时间使用违规：

共发现 173 个违规:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📄 src/Analyzers/ZakYip.WheelDiverterSorter.Analyzers/DateTimeNowUsageAnalyzer.cs
   Line 20: DateTime.Now (Error)
   "禁止使用 DateTime.Now 或 DateTime.UtcNow - Do not use DateTime.Now or DateTime.UtcNow";
   Line 20: DateTime.UtcNow (Error)
   "禁止使用 DateTime.Now 或 DateTime.UtcNow - Do not use DateTime.Now or DateTime.UtcNow";
   Line 23: ISystemClock.UtcNow (Warning)
   "禁止使用 '{0}'，请使用 ISystemClock.LocalNow 或 ISystemClock.UtcNow - Do not use '{0}', use ISystemClock.LocalNow or ISystemClock.UtcNow instead";
   Line 26: DateTime.Now (Error)
   "业务代码应使用 ISystemClock 接口获取时间，便于测试和时区管理。仅 SystemClock 实现类可以直接使用 DateTime.Now/UtcNow。" +
   Line 27: DateTime.Now (Error)
   "Business code should use ISystemClock interface to get time for testability and timezone management. Only SystemClock implementation can directly use DateTime.Now/UtcNow.";

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/IoLinkageConfiguration.cs
   Line 55: DateTime.UtcNow (Error)
   public DateTime CreatedAt { get; init; } = DateTime.UtcNow;
   Line 60: DateTime.UtcNow (Error)
   public DateTime UpdatedAt { get; init; } = DateTime.UtcNow;
   Line 75: DateTime.UtcNow (Error)
   CreatedAt = DateTime.UtcNow,
   Line 76: DateTime.UtcNow (Error)
   UpdatedAt = DateTime.UtcNow

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/LiteDbLineTopologyRepository.cs
   Line 105: DateTime.Now (Error)
   var now = currentTime ?? DateTime.Now; // 使用本地时间
   Line 135: DateTime.Now (Error)
   CreatedAt = DateTime.Now,
   Line 136: DateTime.Now (Error)
   UpdatedAt = DateTime.Now

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/LiteDbSystemConfigurationRepository.cs
   Line 115: DateTime.UtcNow (Error)
   var now = currentTime ?? DateTime.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/LiteDbWheelBindingsRepository.cs
   Line 98: DateTime.Now (Error)
   var now = currentTime ?? DateTime.Now; // 使用本地时间
   Line 120: DateTime.Now (Error)
   CreatedAt = DateTime.Now,
   Line 121: DateTime.Now (Error)
   UpdatedAt = DateTime.Now

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/PanelConfiguration.cs
   Line 160: DateTime.UtcNow (Error)
   public DateTime CreatedAt { get; init; } = DateTime.UtcNow;
   Line 165: DateTime.UtcNow (Error)
   public DateTime UpdatedAt { get; init; } = DateTime.UtcNow;
   Line 199: DateTime.UtcNow (Error)
   CreatedAt = DateTime.UtcNow,
   Line 200: DateTime.UtcNow (Error)
   UpdatedAt = DateTime.UtcNow

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Orchestration/IPathReroutingService.cs
   Line 113: DateTimeOffset.UtcNow (Error)
   ReroutedAt = DateTimeOffset.UtcNow
   Line 134: DateTimeOffset.UtcNow (Error)
   ReroutedAt = DateTimeOffset.UtcNow

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Orchestration/RouteTopologyConsistencyChecker.cs
   Line 83: DateTime.Now (Error)
   var checkedAt = DateTime.Now; // 使用本地时间

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Segments/ConveyorOperationResult.cs
   Line 27: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset Timestamp { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Topology/DefaultSwitchingPathGenerator.cs
   Line 110: DateTimeOffset.UtcNow (Error)
   GeneratedAt = DateTimeOffset.UtcNow,

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Contracts/AssignChuteContracts.cs
   Line 24: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset RequestTime { get; init; } = DateTimeOffset.UtcNow;
   Line 71: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ResponseTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Contracts/CreateParcelContracts.cs
   Line 24: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset DetectedAt { get; init; } = DateTimeOffset.UtcNow;
   Line 58: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ResponseTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Contracts/SortingRequest.cs
   Line 27: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset RequestTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Contracts/SortingResponse.cs
   Line 53: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ResponseTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Models/ChuteAssignment.cs
   Line 38: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset AssignmentTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Core/ZakYip.WheelDiverterSorter.Core/Sorting/Models/ParcelDescriptor.cs
   Line 27: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset IngressTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/Diagnostics/RelayWheelDiverterSelfTest.cs
   Line 43: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 55: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 67: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/HardwareSwitchingPathExecutor.cs
   Line 92: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 126: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 142: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 170: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 181: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/Vendors/Simulated/SimulatedConveyorSegmentDriver.cs
   Line 36: DateTimeOffset.UtcNow (Error)
   _startCommandTime = DateTimeOffset.UtcNow;

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/Vendors/Simulated/SimulatedPanelInputReader.cs
   Line 30: DateTimeOffset.UtcNow (Error)
   LastChangedAt = DateTimeOffset.UtcNow,
   Line 45: DateTimeOffset.UtcNow (Error)
   LastChangedAt = DateTimeOffset.UtcNow,
   Line 68: DateTimeOffset.UtcNow (Error)
   LastChangedAt = DateTimeOffset.UtcNow,
   Line 80: DateTimeOffset.UtcNow (Error)
   ? (int)(DateTimeOffset.UtcNow - currentState.LastChangedAt).TotalMilliseconds
   Line 87: DateTimeOffset.UtcNow (Error)
   LastChangedAt = DateTimeOffset.UtcNow,
   ... 还有 1 个违规

📄 src/Drivers/ZakYip.WheelDiverterSorter.Drivers/Vendors/Simulated/SimulatedSignalTowerOutput.cs
   Line 100: DateTimeOffset.UtcNow (Error)
   ChangedAt = DateTimeOffset.UtcNow

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/AnomalyDetector.cs
   Line 58: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow,
   Line 74: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow,
   Line 87: DateTimeOffset.UtcNow (Error)
   _upstreamTimeouts.Enqueue(DateTimeOffset.UtcNow);
   Line 126: DateTimeOffset.UtcNow (Error)
   var now = DateTimeOffset.UtcNow;
   Line 181: DateTimeOffset.UtcNow (Error)
   var now = DateTimeOffset.UtcNow;
   ... 还有 2 个违规

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Concurrency/ConcurrentSwitchingPathExecutor.cs
   Line 128: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 170: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 181: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Concurrency/ParcelQueueItem.cs
   Line 26: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset EnqueuedAt { get; init; } = DateTimeOffset.UtcNow;

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/ConveyorSegment.cs
   Line 85: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;
   Line 88: DateTimeOffset.UtcNow (Error)
   while (DateTimeOffset.UtcNow - startTime < timeout)
   Line 163: DateTimeOffset.UtcNow (Error)
   var stopTime = DateTimeOffset.UtcNow;
   Line 166: DateTimeOffset.UtcNow (Error)
   while (DateTimeOffset.UtcNow - stopTime < timeout)

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/EnhancedPathFailureHandler.cs
   Line 79: DateTimeOffset.UtcNow (Error)
   var failureTime = DateTimeOffset.UtcNow;
   Line 126: DateTimeOffset.UtcNow (Error)
   var failureTime = DateTimeOffset.UtcNow;

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/MockSwitchingPathExecutor.cs
   Line 58: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow
   Line 69: DateTimeOffset.UtcNow (Error)
   FailureTime = DateTimeOffset.UtcNow

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/PathFailureHandler.cs
   Line 45: DateTimeOffset.UtcNow (Error)
   var failureTime = DateTimeOffset.UtcNow;
   Line 76: DateTimeOffset.UtcNow (Error)
   var failureTime = DateTimeOffset.UtcNow;

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/PathReroutingService.cs
   Line 150: DateTimeOffset.UtcNow (Error)
   GeneratedAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/OverloadEvaluationMiddleware.cs
   Line 77: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/PathExecutionMiddleware.cs
   Line 61: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;
   Line 68: DateTimeOffset.UtcNow (Error)
   var elapsedMs = (DateTimeOffset.UtcNow - startTime).TotalMilliseconds;
   Line 89: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 103: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 126: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   ... 还有 1 个违规

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/RoutePlanningMiddleware.cs
   Line 47: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;
   Line 100: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 125: DateTimeOffset.UtcNow (Error)
   var elapsedMs = (DateTimeOffset.UtcNow - startTime).TotalMilliseconds;
   Line 134: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/TracingMiddleware.cs
   Line 78: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 94: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/Pipeline/Middlewares/UpstreamAssignmentMiddleware.cs
   Line 66: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Execution/ZakYip.WheelDiverterSorter.Execution/SelfTest/SystemSelfTestCoordinator.cs
   Line 37: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Application/Services/SortingOrchestrator.cs
   Line 354: ISystemClock.UtcNow (Warning)
   var createdAt = new DateTimeOffset(_clock.UtcNow);
   Line 517: ISystemClock.UtcNow (Warning)
   var upstreamRequestSentAt = new DateTimeOffset(_clock.UtcNow);
   Line 569: ISystemClock.UtcNow (Warning)
   OccurredAt = new DateTimeOffset(_clock.UtcNow),
   Line 640: ISystemClock.UtcNow (Warning)
   OccurredAt = new DateTimeOffset(_clock.UtcNow),
   Line 853: ISystemClock.UtcNow (Warning)
   OccurredAt = new DateTimeOffset(_clock.UtcNow),
   ... 还有 7 个违规

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Commands/ChangeParcelChuteCommandHandler.cs
   Line 41: DateTimeOffset.UtcNow (Error)
   var requestedAt = command.RequestedAt ?? DateTimeOffset.UtcNow;
   Line 93: DateTimeOffset.UtcNow (Error)
   routePlan.MarkAsExceptionRouted(DateTimeOffset.UtcNow);

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Commands/ChangeParcelChuteResult.cs
   Line 75: DateTimeOffset.UtcNow (Error)
   ProcessedAt = DateTimeOffset.UtcNow
   Line 93: DateTimeOffset.UtcNow (Error)
   ProcessedAt = DateTimeOffset.UtcNow

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Controllers/HealthController.cs
   Line 70: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow
   Line 82: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow
   Line 122: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow
   Line 141: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Controllers/IoLinkageController.cs
   Line 692: DateTime.UtcNow (Error)
   CreatedAt = DateTime.UtcNow,
   Line 693: DateTime.UtcNow (Error)
   UpdatedAt = DateTime.UtcNow

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Controllers/RouteConfigController.cs
   Line 420: DateTime.Now (Error)
   fileName = $"routes_{DateTime.Now:yyyyMMdd_HHmmss}.csv";
   Line 427: DateTime.Now (Error)
   fileName = $"routes_{DateTime.Now:yyyyMMdd_HHmmss}.json";

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Models/ApiResponse.cs
   Line 39: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset Timestamp { get; init; } = DateTimeOffset.UtcNow;

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Pipeline/UpstreamAssignmentAdapter.cs
   Line 36: DateTimeOffset.UtcNow (Error)
   RequestTime = DateTimeOffset.UtcNow

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Pipeline/UpstreamFacadeAssignmentMiddleware.cs
   Line 47: DateTimeOffset.UtcNow (Error)
   RequestTime = DateTimeOffset.UtcNow
   Line 63: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 93: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,
   Line 114: DateTimeOffset.UtcNow (Error)
   OccurredAt = DateTimeOffset.UtcNow,

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Services/CachedSwitchingPathGenerator.cs
   Line 40: DateTimeOffset.UtcNow (Error)
   return cachedPath with { GeneratedAt = DateTimeOffset.UtcNow };

📄 src/Host/ZakYip.WheelDiverterSorter.Host/Services/CommunicationStatsService.cs
   Line 54: DateTimeOffset.UtcNow (Error)
   return (long)(DateTimeOffset.UtcNow - _firstConnectedAt.Value).TotalSeconds;
   Line 79: DateTimeOffset.UtcNow (Error)
   var now = DateTimeOffset.UtcNow;
   Line 92: DateTimeOffset.UtcNow (Error)
   _lastDisconnectedAt = DateTimeOffset.UtcNow;

📄 src/Host/ZakYip.WheelDiverterSorter.Host/StateMachine/SystemStateManager.cs
   Line 254: DateTimeOffset.UtcNow (Error)
   TransitionTime = DateTimeOffset.UtcNow,
   Line 294: DateTimeOffset.UtcNow (Error)
   PerformedAt = DateTimeOffset.UtcNow
   Line 320: DateTimeOffset.UtcNow (Error)
   EnteredAt = DateTimeOffset.UtcNow,

📄 src/Host/ZakYip.WheelDiverterSorter.Host/StateMachine/SystemStateManagerWithBoot.cs
   Line 74: DateTimeOffset.UtcNow (Error)
   PerformedAt = DateTimeOffset.UtcNow

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Health/RuleEngineUpstreamHealthChecker.cs
   Line 45: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 61: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 70: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 82: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow
   Line 94: DateTimeOffset.UtcNow (Error)
   CheckedAt = DateTimeOffset.UtcNow

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Infrastructure/SimpleCircuitBreaker.cs
   Line 42: DateTime.UtcNow (Error)
   DateTime.UtcNow - _lastFailureTime >= _breakDuration)
   Line 106: DateTime.UtcNow (Error)
   _lastFailureTime = DateTime.UtcNow;

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Models/ChuteAssignmentNotificationEventArgs.cs
   Line 25: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset NotificationTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Models/ChuteAssignmentRequest.cs
   Line 16: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset RequestTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Models/ChuteAssignmentResponse.cs
   Line 32: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ResponseTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Infrastructure/ZakYip.WheelDiverterSorter.Communication/Models/ParcelDetectionNotification.cs
   Line 19: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset DetectionTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Models/SensorErrorEventArgs.cs
   Line 37: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset ErrorTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Models/SensorFaultEventArgs.cs
   Line 37: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset FaultTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Models/SensorHealthStatus.cs
   Line 38: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset LastCheckTime { get; set; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Models/SensorRecoveryEventArgs.cs
   Line 27: DateTimeOffset.UtcNow (Error)
   public DateTimeOffset RecoveryTime { get; init; } = DateTimeOffset.UtcNow;

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Sensors/LeadshineSensor.cs
   Line 144: DateTimeOffset.UtcNow (Error)
   TriggerTime = DateTimeOffset.UtcNow,

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Sensors/MockSensor.cs
   Line 147: DateTimeOffset.UtcNow (Error)
   TriggerTime = DateTimeOffset.UtcNow,
   Line 158: DateTimeOffset.UtcNow (Error)
   TriggerTime = DateTimeOffset.UtcNow,

📄 src/Ingress/ZakYip.WheelDiverterSorter.Ingress/Services/SensorHealthMonitor.cs
   Line 62: DateTimeOffset.UtcNow (Error)
   LastCheckTime = DateTimeOffset.UtcNow
   Line 83: DateTimeOffset.UtcNow (Error)
   status.StartTime = DateTimeOffset.UtcNow;
   Line 126: DateTimeOffset.UtcNow (Error)
   status.UptimeSeconds = (DateTimeOffset.UtcNow - status.StartTime.Value).TotalSeconds;
   Line 142: DateTimeOffset.UtcNow (Error)
   status.UptimeSeconds = (DateTimeOffset.UtcNow - status.StartTime.Value).TotalSeconds;
   Line 157: DateTimeOffset.UtcNow (Error)
   status.LastErrorTime = DateTimeOffset.UtcNow;
   ... 还有 7 个违规

📄 src/Observability/ZakYip.WheelDiverterSorter.Observability/PrometheusMetrics.cs
   Line 773: DateTimeOffset.UtcNow (Error)
   SystemSelfTestLastSuccessTimestamp.Set(DateTimeOffset.UtcNow.ToUnixTimeSeconds());
   Line 858: DateTimeOffset.UtcNow (Error)
   LastAlertTimestamp.WithLabels(severity, code).Set(DateTimeOffset.UtcNow.ToUnixTimeSeconds());

📄 src/Simulation/ZakYip.WheelDiverterSorter.Simulation/Services/CongestionMetricsCollector.cs
   Line 41: DateTimeOffset.UtcNow (Error)
   Timestamp = DateTimeOffset.UtcNow,
   Line 85: DateTimeOffset.UtcNow (Error)
   var cutoffTime = DateTimeOffset.UtcNow - _timeWindow;

📄 src/Simulation/ZakYip.WheelDiverterSorter.Simulation/Services/ParcelTimelineFactory.cs
   Line 35: DateTimeOffset.UtcNow (Error)
   _simulationStartTime = DateTimeOffset.UtcNow;
   Line 278: DateTimeOffset.UtcNow (Error)
   var elapsed = DateTimeOffset.UtcNow - _simulationStartTime;

📄 src/Simulation/ZakYip.WheelDiverterSorter.Simulation/Services/SimulationRunner.cs
   Line 110: DateTimeOffset.UtcNow (Error)
   var startTime = DateTimeOffset.UtcNow;
   Line 131: DateTimeOffset.UtcNow (Error)
   var endTime = DateTimeOffset.UtcNow;
   Line 209: DateTimeOffset.UtcNow (Error)
   var lastMetricsTime = DateTimeOffset.UtcNow;
   Line 217: DateTimeOffset.UtcNow (Error)
   var currentTime = DateTimeOffset.UtcNow;
   Line 326: DateTimeOffset.UtcNow (Error)
   var processingStartTime = DateTimeOffset.UtcNow;
   ... 还有 8 个违规

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💡 修复建议:
1. 将 DateTime.Now → ISystemClock.LocalNow
2. 将 DateTime.UtcNow → ISystemClock.LocalNow
3. 将 DateTimeOffset.UtcNow → ISystemClock.LocalNowOffset
4. 在构造函数注入 ISystemClock 依赖


⚠️ 根据最新规范，整个项目任何地方都不能使用UTC时间。
所有业务时间必须使用 ISystemClock.LocalNow。
  Stack Trace:
     at ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.DateTimeUsageComplianceTests.ShouldNotUseUtcTimeInBusinessLogic() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests/DateTimeUsageComplianceTests.cs:line 46
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
[xUnit.net 00:00:05.55]     ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.CodingStandardsComplianceTests.AllEnumsShouldBeInCoreEnumsDirectory [FAIL]
  Failed ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.CodingStandardsComplianceTests.AllEnumsShouldBeInCoreEnumsDirectory [60 ms]
  Error Message:
   
❌ 发现枚举定义不符合规范:
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

⚠️ 41 个枚举不在正确的目录 (src/Core/ZakYip.WheelDiverterSorter.Core/Enums/):
  ❌ IoPointConfiguration.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/LineModel/Configuration/IoPointConfiguration.cs
  ❌ ParcelFinalStatus.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Observability/ParcelFinalStatus.cs
  ❌ AlarmLevel.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Observability/AlarmLevel.cs
  ❌ AlarmType.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Observability/AlarmType.cs
  ❌ IoPointType.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/IoBinding/IoPointType.cs
  ❌ ActuatorBindingType.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/IoBinding/ActuatorBindingType.cs
  ❌ ConnectionMode.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Communication/ConnectionMode.cs
  ❌ EmcLockNotificationType.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Communication/EmcLockNotificationType.cs
  ❌ CommunicationMode.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Communication/CommunicationMode.cs
  ❌ CircuitState.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Communication/CircuitState.cs
  ❌ OverloadReason.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Sorting/OverloadReason.cs
  ❌ SortingMode.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Sorting/SortingMode.cs
  ❌ CongestionLevel.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Sorting/CongestionLevel.cs
  ❌ ExceptionType.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Sorting/ExceptionType.cs
  ❌ ParcelSimulationStatus.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Simulation/ParcelSimulationStatus.cs
  ❌ IoBehaviorMode.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Simulation/IoBehaviorMode.cs
  ❌ ParcelGenerationMode.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Simulation/ParcelGenerationMode.cs
  ❌ DenseParcelStrategy.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/Simulation/DenseParcelStrategy.cs
  ❌ DegradationMode.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/System/DegradationMode.cs
  ❌ SignalTowerChannel.cs - /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/src/Core/ZakYip.WheelDiverterSorter.Core/Enums/System/SignalTowerChannel.cs
  ... 还有 21 个枚举

━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

💡 修复建议:
  1. 在 src/Core/ZakYip.WheelDiverterSorter.Core/ 下创建 Enums 目录（如果不存在）
  2. 将所有枚举文件移动到 Enums 目录下
  3. 确保每个文件只包含一个枚举定义
  4. 文件名应与枚举名称一致（例如: SensorType.cs 包含 SensorType 枚举）

期望位置: src/Core/ZakYip.WheelDiverterSorter.Core/Enums

  Stack Trace:
     at ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.CodingStandardsComplianceTests.AllEnumsShouldBeInCoreEnumsDirectory() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests/CodingStandardsComplianceTests.cs:line 515
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
Results File: /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests/TestResults/test-results.trx

Failed!  - Failed:     3, Passed:    13, Skipped:     0, Total:    16, Duration: 6 s - ZakYip.WheelDiverterSorter.TechnicalDebtComplianceTests.dll (net9.0)
Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.Application.Tests/bin/Debug/net9.0/ZakYip.WheelDiverterSorter.Host.Application.Tests.dll (.NETCoreApp,Version=v9.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
[xUnit.net 00:00:00.31]     ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_NormalFlow_ShouldSucceed [FAIL]
[xUnit.net 00:00:00.31]     ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_ShouldFollowParcelFirstSemantics [FAIL]
[xUnit.net 00:00:00.44]     ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_PathGenerationFails_ShouldRouteToExceptionChute [FAIL]
[xUnit.net 00:00:00.45]     ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_PathExecutionFails_ShouldReturnFailure [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_NormalFlow_ShouldSucceed [20 ms]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_NormalFlow_ShouldSucceed() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.Application.Tests/SortingOrchestratorTests.cs:line 163
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_ShouldFollowParcelFirstSemantics [5 ms]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_ShouldFollowParcelFirstSemantics() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.Application.Tests/SortingOrchestratorTests.cs:line 643
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_PathGenerationFails_ShouldRouteToExceptionChute [5 ms]
  Error Message:
   Assert.True() Failure
Expected: True
Actual:   False
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_PathGenerationFails_ShouldRouteToExceptionChute() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.Application.Tests/SortingOrchestratorTests.cs:line 376
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_PathExecutionFails_ShouldReturnFailure [4 ms]
  Error Message:
   Assert.Equal() Failure: Values differ
Expected: 5
Actual:   0
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_PathExecutionFails_ShouldReturnFailure() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.Application.Tests/SortingOrchestratorTests.cs:line 429
--- End of stack trace from previous location ---
[xUnit.net 00:00:00.46]     ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ExecuteDebugSortAsync_PathGenerationFails_ShouldRouteToExceptionChute [FAIL]
[xUnit.net 00:00:00.46]     ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_CannotGenerateExceptionPath_ShouldReturnFailure [FAIL]
  Failed ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ExecuteDebugSortAsync_PathGenerationFails_ShouldRouteToExceptionChute [9 ms]
  Error Message:
   Moq.MockException : 
Expected invocation on the mock once, but was 0 times: g => g.GeneratePath(99)

Performed invocations:

   Mock<ISwitchingPathGenerator:10> (g):

      ISwitchingPathGenerator.GeneratePath(999)

  Stack Trace:
     at Moq.Mock.Verify(Mock mock, LambdaExpression expression, Times times, String failMessage) in /_/src/Moq/Mock.cs:line 332
   at Moq.Mock`1.Verify[TResult](Expression`1 expression, Func`1 times) in /_/src/Moq/Mock`1.cs:line 840
   at ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ExecuteDebugSortAsync_PathGenerationFails_ShouldRouteToExceptionChute() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.Application.Tests/SortingOrchestratorTests.cs:line 561
--- End of stack trace from previous location ---
  Failed ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_CannotGenerateExceptionPath_ShouldReturnFailure [4 ms]
  Error Message:
   Assert.Contains() Failure: Sub-string not found
String:    "处理异常: Parameter count mismatch."
Not found: "路径生成失败"
  Stack Trace:
     at ZakYip.WheelDiverterSorter.Host.Application.Tests.SortingOrchestratorTests.ProcessParcelAsync_CannotGenerateExceptionPath_ShouldReturnFailure() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.Application.Tests/SortingOrchestratorTests.cs:line 463
--- End of stack trace from previous location ---
Results File: /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.Host.Application.Tests/TestResults/test-results.trx

Failed!  - Failed:     6, Passed:    21, Skipped:     0, Total:    27, Duration: 317 ms - ZakYip.WheelDiverterSorter.Host.Application.Tests.dll (net9.0)
Test run for /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.ArchTests/bin/Debug/net9.0/ZakYip.WheelDiverterSorter.ArchTests.dll (.NETCoreApp,Version=v9.0)
VSTest version 18.0.1 (x64)

Starting test execution, please wait...
A total of 1 test files matched the specified pattern.
Results File: /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.ArchTests/TestResults/test-results.trx

Passed!  - Failed:     0, Passed:     4, Skipped:     0, Total:     4, Duration: 26 ms - ZakYip.WheelDiverterSorter.ArchTests.dll (net9.0)
[xUnit.net 00:00:18.08]     ZakYip.WheelDiverterSorter.E2ETests.SensorFaultSimulationTests.ScenarioSJ1_SensorJitter_DuplicatePackagesRouteToException [FAIL]
  Failed ZakYip.WheelDiverterSorter.E2ETests.SensorFaultSimulationTests.ScenarioSJ1_SensorJitter_DuplicatePackagesRouteToException [14 s]
  Error Message:
   Expected sensorFaultParcels not to be empty because 应该存在至少一个因传感器抖动而异常的包裹.
  Stack Trace:
     at FluentAssertions.Execution.XUnit2TestFramework.Throw(String message)
   at FluentAssertions.Execution.TestFrameworkProvider.Throw(String message)
   at FluentAssertions.Execution.DefaultAssertionStrategy.HandleFailure(String message)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(Func`1 failReasonFunc)
   at FluentAssertions.Execution.AssertionScope.FailWith(String message, Object[] args)
   at FluentAssertions.Execution.GivenSelector`1.FailWith(String message, Object[] args)
   at FluentAssertions.Execution.GivenSelector`1.FailWith(String message)
   at FluentAssertions.Collections.GenericCollectionAssertions`3.NotBeEmpty(String because, Object[] becauseArgs)
   at ZakYip.WheelDiverterSorter.E2ETests.SensorFaultSimulationTests.ScenarioSJ1_SensorJitter_DuplicatePackagesRouteToException() in /home/runner/work/ZakYip.WheelDiverterSorter/ZakYip.WheelDiverterSorter/tests/ZakYip.WheelDiverterSorter.E2ETests/SensorFaultSimulationTests.cs:line 270
--- End of stack trace from previous location ---
